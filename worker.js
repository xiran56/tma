var Z_=async function(r={}){var e,n,_=r,a=new Promise((i,o)=>{e=i,n=o}),p=typeof window=="object",f=typeof WorkerGlobalScope<"u",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(h){let{createRequire:i}=await import("module");var g=i(import.meta.url)}var c,P,G="./this.program",Oe=(i,o)=>{throw o},Ee=import.meta.url,le="";if(h){var Ne=g("fs"),f_=g("path");Ee.startsWith("file:")&&(le=f_.dirname(g("url").fileURLToPath(Ee))+"/"),P=i=>(i=ze(i)?new URL(i):i,Ne.readFileSync(i)),c=async(i,o=!0)=>(i=ze(i)?new URL(i):i,Ne.readFileSync(i,o?void 0:"utf8")),process.argv.length>1&&(G=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),Oe=(i,o)=>{throw process.exitCode=i,o}}else if(p||f){try{le=new URL(".",Ee).href}catch{}f&&(P=i=>{var o=new XMLHttpRequest;return o.open("GET",i,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),c=async i=>{if(ze(i))return new Promise((m,l)=>{var w=new XMLHttpRequest;w.open("GET",i,!0),w.responseType="arraybuffer",w.onload=()=>{w.status==200||w.status==0&&w.response?m(w.response):l(w.status)},w.onerror=l,w.send(null)});var o=await fetch(i,{credentials:"same-origin"});if(o.ok)return o.arrayBuffer();throw new Error(o.status+" : "+o.url)}}var Le,Ge,he,N,oe,__,w_,u_=console.log.bind(console),Te=console.error.bind(console),t_=!1,h_=!1,ze=i=>i.startsWith("file://");function c_(){var i=Ge.buffer;new Int8Array(i),new Int16Array(i),_.HEAPU8=he=new Uint8Array(i),new Uint16Array(i),_.HEAP32=N=new Int32Array(i),_.HEAPU32=oe=new Uint32Array(i),_.HEAPF32=new Float32Array(i),w_=new Float64Array(i),__=new BigInt64Array(i),new BigUint64Array(i)}var n_,ce=0,Ce=null;function B_(){return _.locateFile?(i="mupdf-wasm.wasm",_.locateFile?_.locateFile(i,le):le+i):new URL("mupdf-wasm.wasm",import.meta.url).href;var i}async function M_(i){if(!Le)try{var o=await c(i);return new Uint8Array(o)}catch{}return(function(m){if(m==n_&&Le)return new Uint8Array(Le);if(P)return P(m);throw"both async and sync fetching of the wasm failed"})(i)}async function j_(i,o){try{var m=await M_(i);return await WebAssembly.instantiate(m,o)}catch(l){Te(`failed to asynchronously prepare wasm: ${l}`),(function(w){_.onAbort?.(w),Te(w="Aborted("+w+")"),t_=!0,w+=". Build with -sASSERTIONS for more info.",h_&&q_();var u=new WebAssembly.RuntimeError(w);throw n(u),u})(l)}}class H_{name="ExitStatus";constructor(o){this.message=`Program terminated with exit(${o})`,this.status=o}}var g_=i=>{for(;i.length>0;)i.shift()(_)},b_=[],U_=i=>b_.push(i),y_=[],$_=i=>y_.push(i),x_=!0,E_=new TextDecoder,s_=(i,o)=>{if(!i)return"";for(var m=i+o,l=i;!(l>=m)&&he[l];)++l;return E_.decode(he.subarray(i,l))},r_={varargs:void 0,getStr:i=>s_(i)},Je=i=>i<-9007199254740992||i>9007199254740992?NaN:Number(i),ke=(i,o,m)=>((l,w,u,y)=>{if(!(y>0))return 0;for(var A=u,Y=u+y-1,Ae=0;Ae<l.length;++Ae){var S=l.charCodeAt(Ae);if(S>=55296&&S<=57343&&(S=65536+((1023&S)<<10)|1023&l.charCodeAt(++Ae)),S<=127){if(u>=Y)break;w[u++]=S}else if(S<=2047){if(u+1>=Y)break;w[u++]=192|S>>6,w[u++]=128|63&S}else if(S<=65535){if(u+2>=Y)break;w[u++]=224|S>>12,w[u++]=128|S>>6&63,w[u++]=128|63&S}else{if(u+3>=Y)break;w[u++]=240|S>>18,w[u++]=128|S>>12&63,w[u++]=128|S>>6&63,w[u++]=128|63&S}}return w[u]=0,u-A})(i,he,o,m),T_=()=>Date.now(),a_=[],k_=(i,o,m)=>{var l=((w,u)=>{var y;for(a_.length=0;y=he[w++];){var A=y!=105;u+=(A&=y!=112)&&u%8?4:0,a_.push(y==112?oe[u>>2]:y==106?__[u>>3]:y==105?N[u>>2]:w_[u>>3]),u+=A?8:4}return a_})(o,m);return W_[i](...l)},G_=(i,o)=>Math.ceil(i/o)*o,z_=i=>{var o=(i-Ge.buffer.byteLength+65535)/65536|0;try{return Ge.grow(o),c_(),1}catch{}},i_={},Re=()=>{if(!Re.strings){var i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:G||"./this.program"};for(var o in i_)i_[o]===void 0?delete i[o]:i[o]=i_[o];var m=[];for(var o in i)m.push(`${o}=${i[o]}`);Re.strings=m}return Re.strings},A_=i=>{for(var o=0,m=0;m<i.length;++m){var l=i.charCodeAt(m);l<=127?o++:l<=2047?o+=2:l>=55296&&l<=57343?(o+=4,++m):o+=3}return o},J_=i=>{x_||(_.onExit?.(i),t_=!0),Oe(i,new H_(i))},V_=(i,o)=>{J_(i)},Y_=[null,[],[]],K_=(i,o)=>{var m=Y_[i];o===0||o===10?((i===1?u_:Te)(((l,w=0,u=NaN)=>{for(var y=w+u,A=w;l[A]&&!(A>=y);)++A;return E_.decode(l.buffer?l.subarray(w,A):new Uint8Array(l.slice(w,A)))})(m)),m.length=0):m.push(o)};_.noExitRuntime&&(x_=_.noExitRuntime),_.print&&(u_=_.print),_.printErr&&(Te=_.printErr),_.wasmBinary&&(Le=_.wasmBinary),_.arguments&&_.arguments,_.thisProgram&&(G=_.thisProgram),_.UTF8ToString=s_,_.stringToUTF8=ke,_.lengthBytesUTF8=A_;var W_={6016e3:()=>{throw"TRYLATER"},6016022:()=>{throw"ABORT"},6016041:i=>{throw new Error(s_(i))},6016080:()=>{throw new Error("Cannot create MuPDF context!")},6016133:(i,o,m,l,w,u,y)=>{globalThis.$libmupdf_text_walk.begin_span(i,o,m,l,w,u,y)},6016207:(i,o,m,l,w,u,y,A)=>{globalThis.$libmupdf_text_walk.show_glyph(i,o,m,l,w,u,y,A)},6016285:i=>{globalThis.$libmupdf_text_walk.end_span(i)},6016333:(i,o,m,l)=>globalThis.$libmupdf_load_font_file(i,o,m,l),6016396:(i,o,m,l)=>globalThis.$libmupdf_stm_read(i,o,m,l),6016454:i=>{globalThis.$libmupdf_stm_close(i)},6016494:(i,o,m,l)=>globalThis.$libmupdf_stm_seek(i,o,m,l),6016552:(i,o,m)=>{globalThis.$libmupdf_path_walk.moveto(i,o,m)},6016606:(i,o,m)=>{globalThis.$libmupdf_path_walk.lineto(i,o,m)},6016660:(i,o,m,l,w,u,y)=>{globalThis.$libmupdf_path_walk.curveto(i,o,m,l,w,u,y)},6016731:i=>{globalThis.$libmupdf_path_walk.closepath(i)},6016780:i=>{globalThis.$libmupdf_device.close_device(i)},6016829:i=>{globalThis.$libmupdf_device.drop_device(i)},6016877:(i,o,m,l,w,u,y,A)=>{globalThis.$libmupdf_device.fill_path(i,o,m,l,w,u,y,A)},6016951:(i,o,m,l,w,u,y,A)=>{globalThis.$libmupdf_device.stroke_path(i,o,m,l,w,u,y,A)},6017027:(i,o,m,l)=>{globalThis.$libmupdf_device.clip_path(i,o,m,l)},6017085:(i,o,m,l)=>{globalThis.$libmupdf_device.clip_stroke_path(i,o,m,l)},6017150:(i,o,m,l,w,u,y)=>{globalThis.$libmupdf_device.fill_text(i,o,m,l,w,u,y)},6017220:(i,o,m,l,w,u,y,A)=>{globalThis.$libmupdf_device.stroke_text(i,o,m,l,w,u,y,A)},6017296:(i,o,m)=>{globalThis.$libmupdf_device.clip_text(i,o,m)},6017350:(i,o,m,l)=>{globalThis.$libmupdf_device.clip_stroke_text(i,o,m,l)},6017415:(i,o,m)=>{globalThis.$libmupdf_device.ignore_text(i,o,m)},6017471:(i,o,m,l)=>{globalThis.$libmupdf_device.fill_shade(i,o,m,l)},6017530:(i,o,m,l)=>{globalThis.$libmupdf_device.fill_image(i,o,m,l)},6017589:(i,o,m,l,w,u,y)=>{globalThis.$libmupdf_device.fill_image_mask(i,o,m,l,w,u,y)},6017665:(i,o,m)=>{globalThis.$libmupdf_device.clip_image_mask(i,o,m)},6017725:i=>{globalThis.$libmupdf_device.pop_clip(i)},6017770:(i,o,m,l,w,u)=>{globalThis.$libmupdf_device.begin_mask(i,o,m,l,w,u)},6017837:(i,o)=>{globalThis.$libmupdf_device.end_mask(i,o)},6017886:(i,o,m,l,w,u,y)=>{globalThis.$libmupdf_device.begin_group(i,o,m,l,w,u,y)},6017958:i=>{globalThis.$libmupdf_device.end_group(i)},6018004:(i,o,m,l,w,u,y)=>globalThis.$libmupdf_device.begin_tile(i,o,m,l,w,u,y),6018082:i=>{globalThis.$libmupdf_device.end_tile(i)},6018127:(i,o)=>{globalThis.$libmupdf_device.begin_layer(i,o)},6018179:i=>{globalThis.$libmupdf_device.end_layer(i)}},X_={g:function(i,o,m){return r_.varargs=m,0},u:function(i,o){o=Je(o)},t:function(i,o,m){return r_.varargs=m,0},f:function(i,o,m,l){r_.varargs=l},s:i=>{},e:(i,o,m)=>{},m:function(i,o){i=Je(i);var m=new Date(1e3*i);N[o>>2]=m.getUTCSeconds(),N[o+4>>2]=m.getUTCMinutes(),N[o+8>>2]=m.getUTCHours(),N[o+12>>2]=m.getUTCDate(),N[o+16>>2]=m.getUTCMonth(),N[o+20>>2]=m.getUTCFullYear()-1900,N[o+24>>2]=m.getUTCDay();var l=Date.UTC(m.getUTCFullYear(),0,1,0,0,0,0),w=(m.getTime()-l)/864e5|0;N[o+28>>2]=w},l:function(i){var o=(()=>{var m=Date.UTC(N[i+20>>2]+1900,N[i+16>>2],N[i+12>>2],N[i+8>>2],N[i+4>>2],N[i>>2],0),l=new Date(m);N[i+24>>2]=l.getUTCDay();var w=Date.UTC(l.getUTCFullYear(),0,1,0,0,0,0),u=(l.getTime()-w)/864e5|0;return N[i+28>>2]=u,l.getTime()/1e3})();return BigInt(o)},k:(i,o,m,l)=>{var w=new Date().getFullYear(),u=new Date(w,0,1),y=new Date(w,6,1),A=u.getTimezoneOffset(),Y=y.getTimezoneOffset(),Ae=Math.max(A,Y);oe[i>>2]=60*Ae,N[o>>2]=+(A!=Y);var S=F_=>{var Q_=F_>=0?"-":"+",I_=Math.abs(F_);return`UTC${Q_}${String(Math.floor(I_/60)).padStart(2,"0")}${String(I_%60).padStart(2,"0")}`},v_=S(A),P_=S(Y);Y<A?(ke(v_,m,17),ke(P_,l,17)):(ke(v_,l,17),ke(P_,m,17))},r:function(i,o,m){if(o=Je(o),!((l=i)>=0&&l<=3))return 28;var l,w;w=i===0?T_():performance.now();var u=Math.round(1e3*w*1e3);return __[m>>3]=BigInt(u),0},a:(i,o,m)=>k_(i,o,m),j:(i,o,m)=>k_(i,o,m),i:T_,h:i=>{var o=he.length,m=2147483648;if((i>>>=0)>m)return!1;for(var l=1;l<=4;l*=2){var w=o*(1+.2/l);w=Math.min(w,i+100663296);var u=Math.min(m,G_(Math.max(i,w),65536));if(z_(u))return!0}return!1},q:(i,o)=>{var m=0,l=0;for(var w of Re()){var u=o+m;oe[i+l>>2]=u,m+=ke(w,u,1/0)+1,l+=4}return 0},p:(i,o)=>{var m=Re();oe[i>>2]=m.length;var l=0;for(var w of m)l+=A_(w)+1;return oe[o>>2]=l,0},b:V_,d:i=>52,o:(i,o,m,l)=>52,n:function(i,o,m,l){return o=Je(o),70},c:(i,o,m,l)=>{for(var w=0,u=0;u<m;u++){var y=oe[o>>2],A=oe[o+4>>2];o+=8;for(var Y=0;Y<A;Y++)K_(i,he[y+Y]);w+=A}return oe[l>>2]=w,0}},s=await(async function(){function i(l,w){return s=l.exports,Ge=s.v,c_(),(function(){if(ce--,_.monitorRunDependencies?.(ce),ce==0&&Ce){var u=Ce;Ce=null,u()}})(),s}ce++,_.monitorRunDependencies?.(ce);var o={a:X_};if(_.instantiateWasm)return new Promise((l,w)=>{_.instantiateWasm(o,(u,y)=>{l(i(u))})});n_??=B_();try{var m=(function(l){return i(l.instance)})(await(async function(l,w,u){if(!l&&typeof WebAssembly.instantiateStreaming=="function"&&!ze(w)&&!h)try{var y=fetch(w,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(y,u)}catch(A){Te(`wasm streaming compile failed: ${A}`),Te("falling back to ArrayBuffer instantiation")}return j_(w,u)})(Le,n_,o));return m}catch(l){return n(l),Promise.reject(l)}})(),q_=(s.w,_._wasm_init_context=s.x,_._wasm_malloc=s.y,_._wasm_free=s.z,_._wasm_enable_icc=s.A,_._wasm_disable_icc=s.B,_._wasm_set_user_css=s.C,_._wasm_Memento_checkAllMemory=s.D,_._wasm_Memento_listBlocks=s.E,_._wasm_keep_buffer=s.F,_._wasm_drop_buffer=s.G,_._wasm_keep_stream=s.H,_._wasm_drop_stream=s.I,_._wasm_keep_colorspace=s.J,_._wasm_drop_colorspace=s.K,_._wasm_keep_pixmap=s.L,_._wasm_drop_pixmap=s.M,_._wasm_keep_font=s.N,_._wasm_drop_font=s.O,_._wasm_keep_stroke_state=s.P,_._wasm_drop_stroke_state=s.Q,_._wasm_keep_image=s.R,_._wasm_drop_image=s.S,_._wasm_keep_shade=s.T,_._wasm_drop_shade=s.U,_._wasm_keep_path=s.V,_._wasm_drop_path=s.W,_._wasm_keep_text=s.X,_._wasm_drop_text=s.Y,_._wasm_keep_device=s.Z,_._wasm_drop_device=s._,_._wasm_keep_display_list=s.$,_._wasm_drop_display_list=s.aa,_._wasm_drop_stext_page=s.ba,_._wasm_drop_document_writer=s.ca,_._wasm_drop_outline_iterator=s.da,_._wasm_keep_document=s.ea,_._wasm_drop_document=s.fa,_._wasm_keep_page=s.ga,_._wasm_drop_page=s.ha,_._wasm_keep_link=s.ia,_._wasm_drop_link=s.ja,_._wasm_keep_outline=s.ka,_._wasm_drop_outline=s.la,_._wasm_pdf_keep_annot=s.ma,_._wasm_pdf_drop_annot=s.na,_._wasm_pdf_keep_obj=s.oa,_._wasm_pdf_drop_obj=s.pa,_._wasm_pdf_keep_graft_map=s.qa,_._wasm_pdf_drop_graft_map=s.ra,_._wasm_buffer_get_data=s.sa,_._wasm_buffer_get_len=s.ta,_._wasm_colorspace_get_type=s.ua,_._wasm_colorspace_get_n=s.va,_._wasm_colorspace_get_name=s.wa,_._wasm_pixmap_get_w=s.xa,_._wasm_pixmap_get_h=s.ya,_._wasm_pixmap_get_x=s.za,_._wasm_pixmap_get_y=s.Aa,_._wasm_pixmap_get_n=s.Ba,_._wasm_pixmap_get_stride=s.Ca,_._wasm_pixmap_get_alpha=s.Da,_._wasm_pixmap_get_xres=s.Ea,_._wasm_pixmap_get_yres=s.Fa,_._wasm_pixmap_get_colorspace=s.Ga,_._wasm_pixmap_get_samples=s.Ha,_._wasm_pixmap_set_xres=s.Ia,_._wasm_pixmap_set_yres=s.Ja,_._wasm_font_get_name=s.Ka,_._wasm_stroke_state_get_start_cap=s.La,_._wasm_stroke_state_set_start_cap=s.Ma,_._wasm_stroke_state_get_dash_cap=s.Na,_._wasm_stroke_state_set_dash_cap=s.Oa,_._wasm_stroke_state_get_end_cap=s.Pa,_._wasm_stroke_state_set_end_cap=s.Qa,_._wasm_stroke_state_get_linejoin=s.Ra,_._wasm_stroke_state_set_linejoin=s.Sa,_._wasm_stroke_state_get_linewidth=s.Ta,_._wasm_stroke_state_set_linewidth=s.Ua,_._wasm_stroke_state_get_miterlimit=s.Va,_._wasm_stroke_state_set_miterlimit=s.Wa,_._wasm_stroke_state_get_dash_phase=s.Xa,_._wasm_stroke_state_set_dash_phase=s.Ya,_._wasm_stroke_state_get_dash_len=s.Za,_._wasm_image_get_w=s._a,_._wasm_image_get_h=s.$a,_._wasm_image_get_n=s.ab,_._wasm_image_get_bpc=s.bb,_._wasm_image_get_xres=s.cb,_._wasm_image_get_yres=s.db,_._wasm_image_get_imagemask=s.eb,_._wasm_image_get_colorspace=s.fb,_._wasm_image_get_mask=s.gb,_._wasm_outline_get_title=s.hb,_._wasm_outline_get_uri=s.ib,_._wasm_outline_get_next=s.jb,_._wasm_outline_get_down=s.kb,_._wasm_outline_get_is_open=s.lb,_._wasm_outline_item_get_title=s.mb,_._wasm_outline_item_get_uri=s.nb,_._wasm_outline_item_get_is_open=s.ob,_._wasm_link_get_rect=s.pb,_._wasm_link_get_uri=s.qb,_._wasm_link_get_next=s.rb,_._wasm_stext_page_get_mediabox=s.sb,_._wasm_stext_page_get_first_block=s.tb,_._wasm_stext_block_get_next=s.ub,_._wasm_stext_block_get_type=s.vb,_._wasm_stext_block_get_bbox=s.wb,_._wasm_stext_block_get_first_line=s.xb,_._wasm_stext_block_get_transform=s.yb,_._wasm_stext_block_get_image=s.zb,_._wasm_stext_line_get_next=s.Ab,_._wasm_stext_line_get_wmode=s.Bb,_._wasm_stext_line_get_dir=s.Cb,_._wasm_stext_line_get_bbox=s.Db,_._wasm_stext_line_get_first_char=s.Eb,_._wasm_stext_char_get_next=s.Fb,_._wasm_stext_char_get_c=s.Gb,_._wasm_stext_char_get_origin=s.Hb,_._wasm_stext_char_get_quad=s.Ib,_._wasm_stext_char_get_size=s.Jb,_._wasm_stext_char_get_font=s.Kb,_._wasm_stext_char_get_argb=s.Lb,_._wasm_link_dest_get_chapter=s.Mb,_._wasm_link_dest_get_page=s.Nb,_._wasm_link_dest_get_type=s.Ob,_._wasm_link_dest_get_x=s.Pb,_._wasm_link_dest_get_y=s.Qb,_._wasm_link_dest_get_w=s.Rb,_._wasm_link_dest_get_h=s.Sb,_._wasm_link_dest_get_zoom=s.Tb,_._wasm_pdf_filespec_params_get_filename=s.Ub,_._wasm_pdf_filespec_params_get_mimetype=s.Vb,_._wasm_pdf_filespec_params_get_size=s.Wb,_._wasm_pdf_filespec_params_get_created=s.Xb,_._wasm_pdf_filespec_params_get_modified=s.Yb,_._wasm_pdf_page_get_obj=s.Zb,_._wasm_new_buffer=s._b,_._wasm_new_buffer_from_data=s.$b,_._wasm_append_string=s.ac,_._wasm_append_byte=s.bc,_._wasm_append_buffer=s.cc,_._wasm_slice_buffer=s.dc,_._wasm_string_from_buffer=s.ec,_._wasm_device_gray=s.fc,_._wasm_device_rgb=s.gc,_._wasm_device_bgr=s.hc,_._wasm_device_cmyk=s.ic,_._wasm_device_lab=s.jc,_._wasm_new_icc_colorspace=s.kc,_._wasm_new_stroke_state=s.lc,_._wasm_stroke_state_get_dash_item=s.mc,_._wasm_stroke_state_set_dash_item=s.nc,_._wasm_new_base14_font=s.oc,_._wasm_new_cjk_font=s.pc,_._wasm_new_font_from_buffer=s.qc,_._wasm_encode_character=s.rc,_._wasm_advance_glyph=s.sc,_._wasm_font_is_monospaced=s.tc,_._wasm_font_is_serif=s.uc,_._wasm_font_is_bold=s.vc,_._wasm_font_is_italic=s.wc,_._wasm_new_image_from_pixmap=s.xc,_._wasm_new_image_from_buffer=s.yc,_._wasm_get_pixmap_from_image=s.zc,_._wasm_new_pixmap_from_page=s.Ac,_._wasm_new_pixmap_from_page_contents=s.Bc,_._wasm_pdf_new_pixmap_from_page_with_usage=s.Cc,_._wasm_pdf_new_pixmap_from_page_contents_with_usage=s.Dc,_._wasm_new_pixmap_with_bbox=s.Ec,_._wasm_clear_pixmap=s.Fc,_._wasm_clear_pixmap_with_value=s.Gc,_._wasm_invert_pixmap=s.Hc,_._wasm_invert_pixmap_luminance=s.Ic,_._wasm_gamma_pixmap=s.Jc,_._wasm_tint_pixmap=s.Kc,_._wasm_new_buffer_from_pixmap_as_png=s.Lc,_._wasm_new_buffer_from_pixmap_as_pam=s.Mc,_._wasm_new_buffer_from_pixmap_as_psd=s.Nc,_._wasm_new_buffer_from_pixmap_as_jpeg=s.Oc,_._wasm_convert_pixmap=s.Pc,_._wasm_warp_pixmap=s.Qc,_._wasm_bound_shade=s.Rc,_._wasm_new_display_list=s.Sc,_._wasm_bound_display_list=s.Tc,_._wasm_run_display_list=s.Uc,_._wasm_new_pixmap_from_display_list=s.Vc,_._wasm_new_stext_page_from_display_list=s.Wc,_._wasm_search_display_list=s.Xc,_._wasm_new_path=s.Yc,_._wasm_moveto=s.Zc,_._wasm_lineto=s._c,_._wasm_curveto=s.$c,_._wasm_curvetov=s.ad,_._wasm_curvetoy=s.bd,_._wasm_closepath=s.cd,_._wasm_rectto=s.dd,_._wasm_transform_path=s.ed,_._wasm_bound_path=s.fd,_._wasm_new_text=s.gd,_._wasm_bound_text=s.hd,_._wasm_show_glyph=s.id,_._wasm_show_string=s.jd,_._wasm_new_draw_device=s.kd,_._wasm_new_display_list_device=s.ld,_._wasm_close_device=s.md,_._wasm_fill_path=s.nd,_._wasm_stroke_path=s.od,_._wasm_clip_path=s.pd,_._wasm_clip_stroke_path=s.qd,_._wasm_fill_text=s.rd,_._wasm_stroke_text=s.sd,_._wasm_clip_text=s.td,_._wasm_clip_stroke_text=s.ud,_._wasm_ignore_text=s.vd,_._wasm_fill_shade=s.wd,_._wasm_fill_image=s.xd,_._wasm_fill_image_mask=s.yd,_._wasm_clip_image_mask=s.zd,_._wasm_pop_clip=s.Ad,_._wasm_begin_mask=s.Bd,_._wasm_end_mask=s.Cd,_._wasm_begin_group=s.Dd,_._wasm_end_group=s.Ed,_._wasm_begin_tile=s.Fd,_._wasm_end_tile=s.Gd,_._wasm_begin_layer=s.Hd,_._wasm_end_layer=s.Id,_._wasm_new_document_writer_with_buffer=s.Jd,_._wasm_begin_page=s.Kd,_._wasm_end_page=s.Ld,_._wasm_close_document_writer=s.Md,_._wasm_print_stext_page_as_json=s.Nd,_._wasm_search_stext_page=s.Od,_._wasm_snap_selection=s.Pd,_._wasm_copy_selection=s.Qd,_._wasm_highlight_selection=s.Rd,_._wasm_print_stext_page_as_html=s.Sd,_._wasm_print_stext_page_as_text=s.Td,_._wasm_open_document_with_buffer=s.Ud,_._wasm_open_document_with_stream=s.Vd,_._wasm_format_link_uri=s.Wd,_._wasm_needs_password=s.Xd,_._wasm_authenticate_password=s.Yd,_._wasm_has_permission=s.Zd,_._wasm_count_pages=s._d,_._wasm_load_page=s.$d,_._wasm_lookup_metadata=s.ae,_._wasm_set_metadata=s.be,_._wasm_resolve_link=s.ce,_._wasm_resolve_link_dest=s.de,_._wasm_load_outline=s.ee,_._wasm_outline_get_page=s.fe,_._wasm_layout_document=s.ge,_._wasm_is_document_reflowable=s.he,_._wasm_link_set_rect=s.ie,_._wasm_link_set_uri=s.je,_._wasm_bound_page=s.ke,_._wasm_load_links=s.le,_._wasm_create_link=s.me,_._wasm_delete_link=s.ne,_._wasm_run_page=s.oe,_._wasm_run_page_contents=s.pe,_._wasm_run_page_annots=s.qe,_._wasm_run_page_widgets=s.re,_._wasm_new_stext_page_from_page=s.se,_._wasm_new_display_list_from_page=s.te,_._wasm_new_display_list_from_page_contents=s.ue,_._wasm_page_label=s.ve,_._wasm_search_page=s.we,_._wasm_new_outline_iterator=s.xe,_._wasm_outline_iterator_next=s.ye,_._wasm_outline_iterator_prev=s.ze,_._wasm_outline_iterator_up=s.Ae,_._wasm_outline_iterator_down=s.Be,_._wasm_outline_iterator_delete=s.Ce,_._wasm_outline_iterator_item=s.De,_._wasm_outline_iterator_insert=s.Ee,_._wasm_outline_iterator_update=s.Fe,_._wasm_pdf_document_from_fz_document=s.Ge,_._wasm_pdf_page_from_fz_page=s.He,_._wasm_pdf_create_document=s.Ie,_._wasm_pdf_version=s.Je,_._wasm_pdf_was_repaired=s.Ke,_._wasm_pdf_has_unsaved_changes=s.Le,_._wasm_pdf_can_be_saved_incrementally=s.Me,_._wasm_pdf_count_versions=s.Ne,_._wasm_pdf_count_unsaved_versions=s.Oe,_._wasm_pdf_validate_change_history=s.Pe,_._wasm_pdf_enable_journal=s.Qe,_._wasm_pdf_undoredo_state_position=s.Re,_._wasm_pdf_undoredo_state_count=s.Se,_._wasm_pdf_undoredo_step=s.Te,_._wasm_pdf_begin_operation=s.Ue,_._wasm_pdf_begin_implicit_operation=s.Ve,_._wasm_pdf_end_operation=s.We,_._wasm_pdf_abandon_operation=s.Xe,_._wasm_pdf_undo=s.Ye,_._wasm_pdf_redo=s.Ze,_._wasm_pdf_can_undo=s._e,_._wasm_pdf_can_redo=s.$e,_._wasm_pdf_document_language=s.af,_._wasm_pdf_set_document_language=s.bf,_._wasm_pdf_trailer=s.cf,_._wasm_pdf_xref_len=s.df,_._wasm_pdf_lookup_page_obj=s.ef,_._wasm_pdf_add_object=s.ff,_._wasm_pdf_create_object=s.gf,_._wasm_pdf_delete_object=s.hf,_._wasm_pdf_add_stream=s.jf,_._wasm_pdf_add_simple_font=s.kf,_._wasm_pdf_add_cjk_font=s.lf,_._wasm_pdf_add_cid_font=s.mf,_._wasm_pdf_add_image=s.nf,_._wasm_pdf_load_image=s.of,_._wasm_pdf_add_page=s.pf,_._wasm_pdf_insert_page=s.qf,_._wasm_pdf_delete_page=s.rf,_._wasm_pdf_set_page_labels=s.sf,_._wasm_pdf_delete_page_labels=s.tf,_._wasm_pdf_is_embedded_file=s.uf,_._wasm_pdf_get_filespec_params=s.vf,_._wasm_pdf_add_embedded_file=s.wf,_._wasm_pdf_load_embedded_file_contents=s.xf,_._wasm_pdf_write_document_buffer=s.yf,_._wasm_pdf_js_supported=s.zf,_._wasm_pdf_enable_js=s.Af,_._wasm_pdf_disable_js=s.Bf,_._wasm_pdf_rearrange_pages=s.Cf,_._wasm_pdf_subset_fonts=s.Df,_._wasm_pdf_bake_document=s.Ef,_._wasm_pdf_count_layers=s.Ff,_._wasm_pdf_layer_name=s.Gf,_._wasm_pdf_layer_is_enabled=s.Hf,_._wasm_pdf_enable_layer=s.If,_._wasm_pdf_page_transform=s.Jf,_._wasm_pdf_set_page_box=s.Kf,_._wasm_pdf_first_annot=s.Lf,_._wasm_pdf_next_annot=s.Mf,_._wasm_pdf_first_widget=s.Nf,_._wasm_pdf_next_widget=s.Of,_._wasm_pdf_create_annot=s.Pf,_._wasm_pdf_delete_annot=s.Qf,_._wasm_pdf_update_page=s.Rf,_._wasm_pdf_redact_page=s.Sf,_._wasm_pdf_new_graft_map=s.Tf,_._wasm_pdf_graft_mapped_object=s.Uf,_._wasm_pdf_graft_object=s.Vf,_._wasm_pdf_graft_mapped_page=s.Wf,_._wasm_pdf_graft_page=s.Xf,_._wasm_pdf_bound_annot=s.Yf,_._wasm_pdf_run_annot=s.Zf,_._wasm_pdf_new_pixmap_from_annot=s._f,_._wasm_pdf_new_display_list_from_annot=s.$f,_._wasm_pdf_update_annot=s.ag,_._wasm_pdf_annot_obj=s.bg,_._wasm_pdf_annot_type=s.cg,_._wasm_pdf_annot_flags=s.dg,_._wasm_pdf_set_annot_flags=s.eg,_._wasm_pdf_annot_contents=s.fg,_._wasm_pdf_set_annot_contents=s.gg,_._wasm_pdf_annot_author=s.hg,_._wasm_pdf_set_annot_author=s.ig,_._wasm_pdf_annot_creation_date=s.jg,_._wasm_pdf_set_annot_creation_date=s.kg,_._wasm_pdf_annot_modification_date=s.lg,_._wasm_pdf_set_annot_modification_date=s.mg,_._wasm_pdf_annot_border_width=s.ng,_._wasm_pdf_set_annot_border_width=s.og,_._wasm_pdf_annot_border_style=s.pg,_._wasm_pdf_set_annot_border_style=s.qg,_._wasm_pdf_annot_border_effect=s.rg,_._wasm_pdf_set_annot_border_effect=s.sg,_._wasm_pdf_annot_border_effect_intensity=s.tg,_._wasm_pdf_set_annot_border_effect_intensity=s.ug,_._wasm_pdf_annot_opacity=s.vg,_._wasm_pdf_set_annot_opacity=s.wg,_._wasm_pdf_annot_filespec=s.xg,_._wasm_pdf_set_annot_filespec=s.yg,_._wasm_pdf_annot_quadding=s.zg,_._wasm_pdf_set_annot_quadding=s.Ag,_._wasm_pdf_annot_is_open=s.Bg,_._wasm_pdf_set_annot_is_open=s.Cg,_._wasm_pdf_annot_hidden_for_editing=s.Dg,_._wasm_pdf_set_annot_hidden_for_editing=s.Eg,_._wasm_pdf_annot_icon_name=s.Fg,_._wasm_pdf_set_annot_icon_name=s.Gg,_._wasm_pdf_annot_intent=s.Hg,_._wasm_pdf_set_annot_intent=s.Ig,_._wasm_pdf_annot_callout_style=s.Jg,_._wasm_pdf_set_annot_callout_style=s.Kg,_._wasm_pdf_annot_line_leader=s.Lg,_._wasm_pdf_set_annot_line_leader=s.Mg,_._wasm_pdf_annot_line_leader_extension=s.Ng,_._wasm_pdf_set_annot_line_leader_extension=s.Og,_._wasm_pdf_annot_line_leader_offset=s.Pg,_._wasm_pdf_set_annot_line_leader_offset=s.Qg,_._wasm_pdf_annot_line_caption=s.Rg,_._wasm_pdf_set_annot_line_caption=s.Sg,_._wasm_pdf_annot_rich_defaults=s.Tg,_._wasm_pdf_set_annot_rich_defaults=s.Ug,_._wasm_pdf_annot_callout_point=s.Vg,_._wasm_pdf_annot_line_caption_offset=s.Wg,_._wasm_pdf_annot_rect=s.Xg,_._wasm_pdf_annot_popup=s.Yg,_._wasm_pdf_annot_quad_point_count=s.Zg,_._wasm_pdf_annot_quad_point=s._g,_._wasm_pdf_annot_vertex_count=s.$g,_._wasm_pdf_annot_vertex=s.ah,_._wasm_pdf_annot_ink_list_count=s.bh,_._wasm_pdf_annot_ink_list_stroke_count=s.ch,_._wasm_pdf_annot_ink_list_stroke_vertex=s.dh,_._wasm_pdf_annot_rich_contents=s.eh,_._wasm_pdf_annot_border_dash_count=s.fh,_._wasm_pdf_annot_border_dash_item=s.gh,_._wasm_pdf_annot_has_rect=s.hh,_._wasm_pdf_annot_has_ink_list=s.ih,_._wasm_pdf_annot_has_quad_points=s.jh,_._wasm_pdf_annot_has_vertices=s.kh,_._wasm_pdf_annot_has_line=s.lh,_._wasm_pdf_annot_has_interior_color=s.mh,_._wasm_pdf_annot_has_line_ending_styles=s.nh,_._wasm_pdf_annot_has_border=s.oh,_._wasm_pdf_annot_has_border_effect=s.ph,_._wasm_pdf_annot_has_icon_name=s.qh,_._wasm_pdf_annot_has_open=s.rh,_._wasm_pdf_annot_has_author=s.sh,_._wasm_pdf_annot_has_filespec=s.th,_._wasm_pdf_annot_has_callout=s.uh,_._wasm_pdf_annot_has_rich_contents=s.vh,_._wasm_pdf_annot_language=s.wh,_._wasm_pdf_set_annot_language=s.xh,_._wasm_pdf_set_annot_popup=s.yh,_._wasm_pdf_set_annot_rect=s.zh,_._wasm_pdf_clear_annot_quad_points=s.Ah,_._wasm_pdf_clear_annot_vertices=s.Bh,_._wasm_pdf_clear_annot_ink_list=s.Ch,_._wasm_pdf_clear_annot_border_dash=s.Dh,_._wasm_pdf_add_annot_quad_point=s.Eh,_._wasm_pdf_add_annot_vertex=s.Fh,_._wasm_pdf_add_annot_ink_list_stroke=s.Gh,_._wasm_pdf_add_annot_ink_list_stroke_vertex=s.Hh,_._wasm_pdf_add_annot_border_dash_item=s.Ih,_._wasm_pdf_annot_line_ending_styles_start=s.Jh,_._wasm_pdf_annot_line_1=s.Kh,_._wasm_pdf_annot_line_2=s.Lh,_._wasm_pdf_set_annot_line=s.Mh,_._wasm_pdf_set_annot_callout_point=s.Nh,_._wasm_pdf_annot_callout_line=s.Oh,_._wasm_pdf_set_annot_callout_line=s.Ph,_._wasm_pdf_set_annot_line_caption_offset=s.Qh,_._wasm_pdf_annot_line_ending_styles_end=s.Rh,_._wasm_pdf_set_annot_line_ending_styles=s.Sh,_._wasm_pdf_annot_color=s.Th,_._wasm_pdf_annot_interior_color=s.Uh,_._wasm_pdf_set_annot_color=s.Vh,_._wasm_pdf_set_annot_interior_color=s.Wh,_._wasm_pdf_set_annot_default_appearance=s.Xh,_._wasm_pdf_annot_default_appearance_font=s.Yh,_._wasm_pdf_annot_default_appearance_size=s.Zh,_._wasm_pdf_annot_default_appearance_color=s._h,_._wasm_pdf_set_annot_rich_contents=s.$h,_._wasm_pdf_set_annot_stamp_image=s.ai,_._wasm_pdf_set_annot_appearance_from_display_list=s.bi,_._wasm_pdf_set_annot_appearance=s.ci,_._wasm_pdf_apply_redaction=s.di,_._wasm_pdf_reset_form=s.ei,_._wasm_pdf_annot_field_type=s.fi,_._wasm_pdf_annot_field_flags=s.gi,_._wasm_pdf_annot_field_label=s.hi,_._wasm_pdf_annot_field_value=s.ii,_._wasm_pdf_load_field_name=s.ji,_._wasm_pdf_annot_text_widget_max_len=s.ki,_._wasm_pdf_set_annot_text_field_value=s.li,_._wasm_pdf_set_annot_choice_field_value=s.mi,_._wasm_pdf_annot_choice_field_option_count=s.ni,_._wasm_pdf_annot_choice_field_option=s.oi,_._wasm_pdf_toggle_widget=s.pi,_._wasm_pdf_is_indirect=s.qi,_._wasm_pdf_is_bool=s.ri,_._wasm_pdf_is_int=s.si,_._wasm_pdf_is_real=s.ti,_._wasm_pdf_is_number=s.ui,_._wasm_pdf_is_name=s.vi,_._wasm_pdf_is_string=s.wi,_._wasm_pdf_is_array=s.xi,_._wasm_pdf_is_dict=s.yi,_._wasm_pdf_is_stream=s.zi,_._wasm_pdf_to_num=s.Ai,_._wasm_pdf_to_bool=s.Bi,_._wasm_pdf_to_real=s.Ci,_._wasm_pdf_to_name=s.Di,_._wasm_pdf_to_text_string=s.Ei,_._wasm_pdf_new_indirect=s.Fi,_._wasm_pdf_new_array=s.Gi,_._wasm_pdf_new_dict=s.Hi,_._wasm_pdf_new_bool=s.Ii,_._wasm_pdf_new_int=s.Ji,_._wasm_pdf_new_real=s.Ki,_._wasm_pdf_new_name=s.Li,_._wasm_pdf_new_text_string=s.Mi,_._wasm_pdf_new_string=s.Ni,_._wasm_pdf_resolve_indirect=s.Oi,_._wasm_pdf_array_len=s.Pi,_._wasm_pdf_array_get=s.Qi,_._wasm_pdf_dict_get=s.Ri,_._wasm_pdf_dict_len=s.Si,_._wasm_pdf_dict_get_key=s.Ti,_._wasm_pdf_dict_get_val=s.Ui,_._wasm_pdf_dict_get_inheritable=s.Vi,_._wasm_pdf_dict_gets=s.Wi,_._wasm_pdf_dict_gets_inheritable=s.Xi,_._wasm_pdf_dict_put=s.Yi,_._wasm_pdf_dict_puts=s.Zi,_._wasm_pdf_dict_del=s._i,_._wasm_pdf_dict_dels=s.$i,_._wasm_pdf_array_put=s.aj,_._wasm_pdf_array_push=s.bj,_._wasm_pdf_array_delete=s.cj,_._wasm_pdf_sprint_obj=s.dj,_._wasm_pdf_load_stream=s.ej,_._wasm_pdf_load_raw_stream=s.fj,_._wasm_pdf_update_object=s.gj,_._wasm_pdf_update_stream=s.hj,_._wasm_pdf_to_string=s.ij,_._wasm_new_stream=s.jj,_._wasm_walk_path=s.kj,_._wasm_walk_text=s.lj,_._wasm_new_js_device=s.mj,s.nj);return(function(){if(_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.shift()()})(),(function i(){function o(){_.calledRun=!0,t_||(h_=!0,s.w(),e(_),_.onRuntimeInitialized?.(),(function(){if(_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;)U_(_.postRun.shift());g_(b_)})())}ce>0?Ce=i:((function(){if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)$_(_.preRun.shift());g_(y_)})(),ce>0?Ce=i:_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),o()},1)):o())})(),a},D_=Z_;var se=null,t=await D_(globalThis.$libmupdf_wasm_Module);t._wasm_init_context();function J(r){return t._wasm_malloc(r)}function ye(r){t._wasm_free(r)}var Qe={identity:[1,0,0,1,0,0],scale(r,e){return[r,0,0,e,0,0]},translate(r,e){return[1,0,0,1,r,e]},rotate(r){for(;r<0;)r+=360;for(;r>=360;)r-=360;let e=Math.sin(r*Math.PI/180),n=Math.cos(r*Math.PI/180);return[n,e,-e,n,0,0]},invert(r){E(r);let e=r[0]*r[3]-r[1]*r[2];if(e>-1e-23&&e<1e-23)return r;let n=1/e,_=r[3]*n,a=-r[1]*n,p=-r[2]*n,f=r[0]*n,h=-r[4]*_-r[5]*p,g=-r[4]*a-r[5]*f;return[_,a,p,f,h,g]},concat(r,e){return E(r),E(e),[r[0]*e[0]+r[1]*e[2],r[0]*e[1]+r[1]*e[3],r[2]*e[0]+r[3]*e[2],r[2]*e[1]+r[3]*e[3],r[4]*e[0]+r[5]*e[2]+e[4],r[4]*e[1]+r[5]*e[3]+e[5]]}},fe={MIN_INF_RECT:2147483648,MAX_INF_RECT:2147483520,empty:[2147483648,2147483648,2147483520,2147483520],invalid:[0,0,-1,-1],infinite:[2147483520,2147483520,2147483648,2147483648],isEmpty:function(r){return R(r),r[0]>=r[2]||r[1]>=r[3]},isValid:function(r){return R(r),r[0]<=r[2]&&r[1]<=r[3]},isInfinite:function(r){return R(r),r[0]===fe.MAX_INF_RECT&&r[1]===fe.MAX_INF_RECT&&r[2]===fe.MIN_INF_RECT&&r[3]===fe.MIN_INF_RECT},transform:function(r,e){R(r),E(e);var n;if(fe.isInfinite(r)||!fe.isValid(r))return r;var _=r[0]*e[0],a=r[2]*e[0];_>a&&(n=_,_=a,a=n);var p=r[1]*e[2],f=r[3]*e[2];p>f&&(n=p,p=f,f=n),_+=p+e[4],a+=f+e[4];var h=r[0]*e[1],g=r[2]*e[1];h>g&&(n=h,h=g,g=n);var c=r[1]*e[3],P=r[3]*e[3];return c>P&&(n=c,c=P,P=n),h+=c+e[5],g+=P+e[5],[_,h,a,g]}};var S_=J(4),H=J(24)>>2,ie=J(32)>>2,ge=J(24)>>2,B=J(16)>>2,pe=J(32)>>2,Ve=[0,0];function d(r,e){if(typeof e=="string"&&typeof r!==e)throw new TypeError("expected "+e);if(typeof e=="function"&&!(r instanceof e))throw new TypeError("expected "+e.name)}function Ye(r){if(!Array.isArray(r)||r.length!==2)throw new TypeError("expected point")}function R(r){if(!Array.isArray(r)||r.length!==4)throw new TypeError("expected rectangle")}function E(r){if(!Array.isArray(r)||r.length!==6)throw new TypeError("expected matrix")}function N_(r){if(!Array.isArray(r)||r.length!==8)throw new TypeError("expected quad")}function ve(r){if(!Array.isArray(r)||r.length!==1&&r.length!==3&&r.length!==4)throw new TypeError("expected color array")}function o_(r){if(!Array.isArray(r)||r.length!==0&&r.length!==1&&r.length!==3&&r.length!==4)throw new TypeError("expected color array")}function _e(r){if(r instanceof te)return r.pointer;if(r instanceof ArrayBuffer||r instanceof Uint8Array)return new te(r).pointer;if(typeof r=="string")return new te(r).pointer;throw new TypeError("expected buffer")}function j(r,e){if(typeof r=="number"&&r>=0&&r<e.length)return r;if(typeof r=="string"){let n=e.indexOf(r);if(n>=0)return n}throw new TypeError(`invalid enum value ("${r}"; expected ${e.join(", ")})`)}function et(r){var e=t.lengthBytesUTF8(r)+1,n=J(e);return t.stringToUTF8(r,n,e),n}function Ze(r,e){return Ve[e]&&(ye(Ve[e]),Ve[e]=0),Ve[e]=et(r)}function b(r){return Ze(r,0)}function e_(r){return Ze(r,1)}function He(r){return typeof r=="string"?Ze(r,0):0}function We(r){return typeof r=="string"?Ze(r,1):0}function de(r){return t.HEAPF32[H+0]=r[0],t.HEAPF32[H+1]=r[1],H<<2}function Be(r){return t.HEAPF32[H+2]=r[0],t.HEAPF32[H+3]=r[1],H+2<<2}function _t(r){return t.HEAPF32[H+4]=r[0],t.HEAPF32[H+5]=r[1],H+4<<2}function z(r){return t.HEAPF32[ie+0]=r[0],t.HEAPF32[ie+1]=r[1],t.HEAPF32[ie+2]=r[2],t.HEAPF32[ie+3]=r[3],ie<<2}function tt(r){return t.HEAPF32[ie+4]=r[0],t.HEAPF32[ie+5]=r[1],t.HEAPF32[ie+6]=r[2],t.HEAPF32[ie+7]=r[3],ie+4<<2}function T(r){return t.HEAPF32[ge+0]=r[0],t.HEAPF32[ge+1]=r[1],t.HEAPF32[ge+2]=r[2],t.HEAPF32[ge+3]=r[3],t.HEAPF32[ge+4]=r[4],t.HEAPF32[ge+5]=r[5],ge<<2}function L_(r){return t.HEAPF32[pe+0]=r[0],t.HEAPF32[pe+1]=r[1],t.HEAPF32[pe+2]=r[2],t.HEAPF32[pe+3]=r[3],t.HEAPF32[pe+4]=r[4],t.HEAPF32[pe+5]=r[5],t.HEAPF32[pe+6]=r[6],t.HEAPF32[pe+7]=r[7],pe<<2}function ee(r){if(typeof r<"u")switch(r.length){case 0:break;case 1:t.HEAPF32[B+0]=r[0];break;case 3:t.HEAPF32[B+0]=r[0],t.HEAPF32[B+1]=r[1],t.HEAPF32[B+2]=r[2];break;case 4:t.HEAPF32[B+0]=r[0],t.HEAPF32[B+1]=r[1],t.HEAPF32[B+2]=r[2],t.HEAPF32[B+3]=r[3];break}return B<<2}function nt(r){if(r===1)return[t.HEAPF32[B]];if(r===3)return[t.HEAPF32[B+0],t.HEAPF32[B+1],t.HEAPF32[B+2]];if(r===4)return[t.HEAPF32[B+0],t.HEAPF32[B+1],t.HEAPF32[B+2],t.HEAPF32[B+3]];throw new TypeError("invalid number of components for Color: "+r)}function p_(r){return r===0?[]:nt(r)}function Pe(r,e){let n=e>>2,_=[];for(let a=0;a<r;++a)_.push(t.HEAPF32[n+a]);return _}function C_(r){return r===0?null:t.UTF8ToString(r)}function k(r){return t.UTF8ToString(r)}function be(r){let e=t.UTF8ToString(r);return ye(r),e}function Z(r){let e=r>>2;return[t.HEAPF32[e+0],t.HEAPF32[e+1]]}function U(r){let e=r>>2;return[t.HEAPF32[e+0],t.HEAPF32[e+1],t.HEAPF32[e+2],t.HEAPF32[e+3]]}function L(r){let e=r>>2;return[t.HEAPF32[e+0],t.HEAPF32[e+1],t.HEAPF32[e+2],t.HEAPF32[e+3],t.HEAPF32[e+4],t.HEAPF32[e+5]]}function Me(r){let e=r>>2;return[t.HEAPF32[e+0],t.HEAPF32[e+1],t.HEAPF32[e+2],t.HEAPF32[e+3],t.HEAPF32[e+4],t.HEAPF32[e+5],t.HEAPF32[e+6],t.HEAPF32[e+7]]}function Ke(r){let e=t._wasm_buffer_get_data(r),n=t._wasm_buffer_get_len(r);return t.HEAPU8.slice(e,e+n)}function st(r){var e=r>>16&255,n=r>>8&255,_=r&255;return[e/255,n/255,_/255]}function m_(r,e,n,_=500){d(n,"string");let a=0,p=0;try{a=J(32*_),p=J(4*_);let f=r(e,b(n),p,a,_),h=[];if(f>0){let g=[];for(let c=0;c<f;++c){let P=t.HEAP32[(p>>2)+c],G=Me(a+c*32);c>0&&P&&(h.push(g),g=[]),g.push(G)}h.push(g)}return h}finally{ye(p),ye(a)}}var I=class{constructor(e){if(typeof e!="number")throw new Error("invalid pointer: "+typeof e);if(e!==0){let n=this.constructor;n._finalizer||(n._finalizer=new FinalizationRegistry(n._drop)),n._finalizer.register(this,e,this)}this.pointer=e}destroy(){if(this.pointer!==0){let e=this.constructor;e._finalizer.unregister(this),e._drop(this.pointer)}this.pointer=0}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}toString(){return`[${this.constructor.name} ${this.pointer}]`}valueOf(){throw new Error("cannot convert Userdata to Javascript value")}},te=class r extends I{constructor(e){if(typeof e>"u")super(t._wasm_new_buffer(1024));else if(typeof e=="number")super(e);else if(typeof e=="string"){let n=t.lengthBytesUTF8(e),_=J(n+1);t.stringToUTF8(e,_,n+1),super(t._wasm_new_buffer_from_data(_,n))}else if(e instanceof ArrayBuffer||e instanceof Uint8Array){let n=e.byteLength,_=J(n);t.HEAPU8.set(new Uint8Array(e),_),super(t._wasm_new_buffer_from_data(_,n))}}get length(){return this.getLength()}set length(e){throw new TypeError("buffer length is read-only")}getLength(){return t._wasm_buffer_get_len(this.pointer)}readByte(e){let n=t._wasm_buffer_get_data(this.pointer);return t.HEAPU8[n+e]}write(e){t._wasm_append_string(this.pointer,b(e))}writeByte(e){t._wasm_append_byte(this.pointer,e)}writeLine(e){this.write(e),this.writeByte(10)}writeBuffer(e){t._wasm_append_buffer(this.pointer,_e(e))}asUint8Array(){let e=t._wasm_buffer_get_data(this.pointer),n=t._wasm_buffer_get_len(this.pointer);return t.HEAPU8.subarray(e,e+n)}slice(e,n){return typeof n>"u"&&(n=this.getLength()),new r(t._wasm_slice_buffer(this.pointer,e,n))}asString(){return k(t._wasm_string_from_buffer(this.pointer))}save(e){if(se)se.writeFileSync(e,this.asUint8Array());else throw new Error("missing 'fs' module")}};te._drop=t._wasm_drop_buffer;var x=class r extends I{constructor(e,n){if(typeof e=="number")super(e);else{if(typeof e=="string")if(se)e=se.readFileSync(e);else throw new Error("missing 'fs' module");super(t._wasm_new_icc_colorspace(He(n),_e(e)))}}getName(){return k(t._wasm_colorspace_get_name(this.pointer))}getType(){return r.COLORSPACE_TYPES[t._wasm_colorspace_get_type(this.pointer)]||"None"}getNumberOfComponents(){return t._wasm_colorspace_get_n(this.pointer)}isGray(){return this.getType()==="Gray"}isRGB(){return this.getType()==="RGB"}isCMYK(){return this.getType()==="CMYK"}isIndexed(){return this.getType()==="Indexed"}isLab(){return this.getType()==="Lab"}isDeviceN(){return this.getType()==="Separation"}isSubtractive(){return this.getType()==="CMYK"||this.getType()==="Separation"}toString(){return"[ColorSpace "+this.getName()+"]"}};x._drop=t._wasm_drop_colorspace;x.COLORSPACE_TYPES=["None","Gray","RGB","BGR","CMYK","Lab","Indexed","Separation"];x.DeviceGray=new x(t._wasm_device_gray());x.DeviceRGB=new x(t._wasm_device_rgb());x.DeviceBGR=new x(t._wasm_device_bgr());x.DeviceCMYK=new x(t._wasm_device_cmyk());x.Lab=new x(t._wasm_device_lab());var O=class r extends I{constructor(e,n,_=0){let a=0;if(typeof e=="number")a=t._wasm_keep_font(e);else{if(typeof n=="string")if(se)n=se.readFileSync(n);else throw new Error("missing 'fs' module");n?a=t._wasm_new_font_from_buffer(b(e),_e(n),_):e==="zh-Hant"?a=t._wasm_new_cjk_font(r.ADOBE_CNS):e==="zh-Hans"?a=t._wasm_new_cjk_font(r.ADOBE_GB):e==="ja"?a=t._wasm_new_cjk_font(r.ADOBE_JAPAN):e==="ko"?a=t._wasm_new_cjk_font(r.ADOBE_KOREA):a=t._wasm_new_base14_font(b(e))}super(a)}getName(){return k(t._wasm_font_get_name(this.pointer))}encodeCharacter(e){return typeof e=="string"&&(e=e.charCodeAt(0)),t._wasm_encode_character(this.pointer,e)}advanceGlyph(e,n=0){return t._wasm_advance_glyph(this.pointer,e,n)}isMono(){return!!t._wasm_font_is_monospaced(this.pointer)}isSerif(){return!!t._wasm_font_is_serif(this.pointer)}isBold(){return!!t._wasm_font_is_bold(this.pointer)}isItalic(){return!!t._wasm_font_is_italic(this.pointer)}};O._drop=t._wasm_drop_font;O.SIMPLE_ENCODING=["Latin","Greek","Cyrillic"];O.ADOBE_CNS=0;O.ADOBE_GB=1;O.ADOBE_JAPAN=2;O.ADOBE_KOREA=3;O.CJK_ORDERING_BY_LANG={"Adobe-CNS1":0,"Adobe-GB1":1,"Adobe-Japan1":2,"Adobe-Korea1":3,"zh-Hant":0,"zh-TW":0,"zh-HK":0,"zh-Hans":1,"zh-CN":1,ja:2,ko:3};var ne=class r extends I{constructor(e,n){let _=0;if(typeof e=="number")_=t._wasm_keep_image(e);else if(e instanceof re)_=t._wasm_new_image_from_pixmap(e.pointer,n?n.pointer:0);else{if(typeof e=="string")if(se)e=se.readFileSync(e);else throw new Error("missing 'fs' module");_=t._wasm_new_image_from_buffer(_e(e))}super(_)}getWidth(){return t._wasm_image_get_w(this.pointer)}getHeight(){return t._wasm_image_get_h(this.pointer)}getNumberOfComponents(){return t._wasm_image_get_n(this.pointer)}getBitsPerComponent(){return t._wasm_image_get_bpc(this.pointer)}getXResolution(){return t._wasm_image_get_xres(this.pointer)}getYResolution(){return t._wasm_image_get_yres(this.pointer)}getImageMask(){return!!t._wasm_image_get_imagemask(this.pointer)}getColorSpace(){let e=t._wasm_image_get_colorspace(this.pointer);return e?new x(t._wasm_keep_colorspace(e)):null}getMask(){let e=t._wasm_image_get_mask(this.pointer);return e?new r(t._wasm_keep_image(e)):null}toPixmap(){return new re(t._wasm_get_pixmap_from_image(this.pointer))}};ne._drop=t._wasm_drop_image;var $=class r extends I{constructor(e){if(typeof e=="number")return super(e),this;super(t._wasm_new_stroke_state(e?.dashes?.length??0));let n=j(e.lineCap,r.LINE_CAP),_=j(e.lineJoin,r.LINE_JOIN);if(t._wasm_stroke_state_set_start_cap(this.pointer,n),t._wasm_stroke_state_set_dash_cap(this.pointer,n),t._wasm_stroke_state_set_end_cap(this.pointer,n),t._wasm_stroke_state_set_linejoin(this.pointer,_),t._wasm_stroke_state_set_linewidth(this.pointer,e.lineWidth),t._wasm_stroke_state_set_miterlimit(this.pointer,e.miterLimit),t._wasm_stroke_state_set_dash_phase(this.pointer,e.dashPhase??0),e.dashes)for(let a=0;a<e.dashes.length;++a)t._wasm_stroke_state_set_dash_item(this.pointer,a,e.dashes[a]??0)}getLineCap(){return t._wasm_stroke_state_get_start_cap(this.pointer)}getLineJoin(){return t._wasm_stroke_state_get_linejoin(this.pointer)}getLineWidth(){return t._wasm_stroke_state_get_linewidth(this.pointer)}getMiterLimit(){return t._wasm_stroke_state_get_miterlimit(this.pointer)}getDashPhase(){return t._wasm_stroke_state_get_dash_phase(this.pointer)}getDashes(){var e=t._wasm_stroke_state_get_dash_len(this.pointer);if(e>0){var n=[];for(let _=0;_<e;++_)n[_]=t._wasm_stroke_state_get_dash_item(this.pointer,_);return n}return null}};$._drop=t._wasm_drop_stroke_state;$.LINE_CAP=["Butt","Round","Square","Triangle"];$.LINE_JOIN=["Miter","Round","Bevel","MiterXPS"];var ae=class extends I{constructor(e){typeof e=="number"?super(e):super(t._wasm_new_path())}getBounds(e,n){return e!==null&&d(e,$),E(n),U(t._wasm_bound_path(this.pointer,e?.pointer,T(n)))}moveTo(e,n){d(e,"number"),d(n,"number"),t._wasm_moveto(this.pointer,e,n)}lineTo(e,n){d(e,"number"),d(n,"number"),t._wasm_lineto(this.pointer,e,n)}curveTo(e,n,_,a,p,f){d(e,"number"),d(n,"number"),d(_,"number"),d(a,"number"),d(p,"number"),d(f,"number"),t._wasm_curveto(this.pointer,e,n,_,a,p,f)}curveToV(e,n,_,a){d(e,"number"),d(n,"number"),d(_,"number"),d(a,"number"),t._wasm_curvetov(this.pointer,e,n,_,a)}curveToY(e,n,_,a){d(e,"number"),d(n,"number"),d(_,"number"),d(a,"number"),t._wasm_curvetoy(this.pointer,e,n,_,a)}closePath(){t._wasm_closepath(this.pointer)}rect(e,n,_,a){d(e,"number"),d(n,"number"),d(_,"number"),d(a,"number"),t._wasm_rectto(this.pointer,e,n,_,a)}transform(e){E(e),t._wasm_transform_path(this.pointer,T(e))}walk(e){let n=it++;Ie.set(n,e),t._wasm_walk_path(this.pointer,n),Ie.delete(n)}};ae._drop=t._wasm_drop_path;var K=class extends I{constructor(e){typeof e=="number"?super(e):super(t._wasm_new_text())}getBounds(e,n){return e!==null&&d(e,$),E(n),U(t._wasm_bound_text(this.pointer,e?.pointer,T(n)))}showGlyph(e,n,_,a,p=0){d(e,O),E(n),d(_,"number"),d(a,"number"),t._wasm_show_glyph(this.pointer,e.pointer,T(n),_,a,p)}showString(e,n,_,a=0){return d(e,O),E(n),d(_,"string"),L(t._wasm_show_string(this.pointer,e.pointer,T(n),b(_),a))}walk(e){let n=ot++;je.set(n,e),t._wasm_walk_text(this.pointer,n),je.delete(n)}};K._drop=t._wasm_drop_text;var De=class extends I{constructor(e){let n=0;typeof e=="number"?n=e:(R(e),n=t._wasm_new_display_list(z(e))),super(n)}getBounds(){return U(t._wasm_bound_display_list(this.pointer))}toPixmap(e,n,_=!1){return E(e),d(n,x),new re(t._wasm_new_pixmap_from_display_list(this.pointer,T(e),n.pointer,_))}toStructuredText(e=""){return d(e,"string"),new me(t._wasm_new_stext_page_from_display_list(this.pointer,b(e)))}run(e,n){d(e,W),E(n),t._wasm_run_display_list(this.pointer,e.pointer,T(n))}search(e,n=500){return m_(t._wasm_search_display_list,this.pointer,e,n)}};De._drop=t._wasm_drop_display_list;var re=class r extends I{constructor(e,n,_=!1){typeof e=="number"&&super(e),e instanceof x&&(R(n),super(t._wasm_new_pixmap_with_bbox(e.pointer,z(n),_))),e===null&&(R(n),super(t._wasm_new_pixmap_with_bbox(0,z(n),_)))}getBounds(){let e=t._wasm_pixmap_get_x(this.pointer),n=t._wasm_pixmap_get_y(this.pointer),_=t._wasm_pixmap_get_w(this.pointer),a=t._wasm_pixmap_get_h(this.pointer);return[e,n,e+_,n+a]}clear(e){typeof e>"u"?t._wasm_clear_pixmap(this.pointer):t._wasm_clear_pixmap_with_value(this.pointer,e)}getWidth(){return t._wasm_pixmap_get_w(this.pointer)}getHeight(){return t._wasm_pixmap_get_h(this.pointer)}getX(){return t._wasm_pixmap_get_x(this.pointer)}getY(){return t._wasm_pixmap_get_y(this.pointer)}getStride(){return t._wasm_pixmap_get_stride(this.pointer)}getNumberOfComponents(){return t._wasm_pixmap_get_n(this.pointer)}getAlpha(){return t._wasm_pixmap_get_alpha(this.pointer)}getXResolution(){return t._wasm_pixmap_get_xres(this.pointer)}getYResolution(){return t._wasm_pixmap_get_yres(this.pointer)}setResolution(e,n){t._wasm_pixmap_set_xres(this.pointer,e),t._wasm_pixmap_set_yres(this.pointer,n)}getColorSpace(){let e=t._wasm_pixmap_get_colorspace(this.pointer);return e?new x(t._wasm_keep_colorspace(e)):null}getPixels(){let e=t._wasm_pixmap_get_stride(this.pointer),n=t._wasm_pixmap_get_h(this.pointer),_=t._wasm_pixmap_get_samples(this.pointer);return new Uint8ClampedArray(t.HEAPU8.buffer,_,e*n)}asPNG(){let e=t._wasm_new_buffer_from_pixmap_as_png(this.pointer);try{return Ke(e)}finally{t._wasm_drop_buffer(e)}}asPSD(){let e=t._wasm_new_buffer_from_pixmap_as_psd(this.pointer);try{return Ke(e)}finally{t._wasm_drop_buffer(e)}}asPAM(){let e=t._wasm_new_buffer_from_pixmap_as_pam(this.pointer);try{return Ke(e)}finally{t._wasm_drop_buffer(e)}}asJPEG(e,n=!1){let _=t._wasm_new_buffer_from_pixmap_as_jpeg(this.pointer,e,n);try{return Ke(_)}finally{t._wasm_drop_buffer(_)}}invert(){t._wasm_invert_pixmap(this.pointer)}invertLuminance(){t._wasm_invert_pixmap_luminance(this.pointer)}gamma(e){t._wasm_gamma_pixmap(this.pointer,e)}tint(e,n){let _=0,a=16777215;typeof e=="number"?_=e:e instanceof Array&&e.length===3&&(_=e[0]*255<<16|e[1]*255<<8|e[2]*255),typeof n=="number"?a=n:n instanceof Array&&n.length===3&&(n=n[0]*255<<16|n[1]*255<<8|n[2]*255),t._wasm_tint_pixmap(this.pointer,_,a)}convertToColorSpace(e,n=!1){return d(e,x),d(n,"boolean"),new r(t._wasm_convert_pixmap(this.pointer,e.pointer,n))}warp(e,n,_){let a=e.flat();return N_(a),d(n,"number"),d(_,"number"),new r(t._wasm_warp_pixmap(this.pointer,L_(a),n,_))}};re._drop=t._wasm_drop_pixmap;var Ue=class extends I{getBounds(){return U(t._wasm_bound_shade(this.pointer))}};Ue._drop=t._wasm_drop_shade;var me=class r extends I{walk(e){let n=t._wasm_stext_page_get_first_block(this.pointer);for(;n;){let _=t._wasm_stext_block_get_type(n),a=U(t._wasm_stext_block_get_bbox(n));if(_===1){if(e.onImageBlock){let p=L(t._wasm_stext_block_get_transform(n)),f=new ne(t._wasm_stext_block_get_image(n));e.onImageBlock(a,p,f)}}else{e.beginTextBlock&&e.beginTextBlock(a);let p=t._wasm_stext_block_get_first_line(n);for(;p;){let f=U(t._wasm_stext_line_get_bbox(p)),h=t._wasm_stext_line_get_wmode(p),g=Z(t._wasm_stext_line_get_dir(p));if(e.beginLine&&e.beginLine(f,h,g),e.onChar){let c=t._wasm_stext_line_get_first_char(p);for(;c;){let P=String.fromCharCode(t._wasm_stext_char_get_c(c)),G=Z(t._wasm_stext_char_get_origin(c)),Oe=new O(t._wasm_stext_char_get_font(c)),Ee=t._wasm_stext_char_get_size(c),le=Me(t._wasm_stext_char_get_quad(c)),Ne=st(t._wasm_stext_char_get_argb(c));e.onChar(P,G,Oe,Ee,le,Ne),c=t._wasm_stext_char_get_next(c)}}e.endLine&&e.endLine(),p=t._wasm_stext_line_get_next(p)}e.endTextBlock&&e.endTextBlock()}n=t._wasm_stext_block_get_next(n)}}asJSON(e=1){return be(t._wasm_print_stext_page_as_json(this.pointer,e))}asHTML(e){return be(t._wasm_print_stext_page_as_html(this.pointer,e))}asText(){return be(t._wasm_print_stext_page_as_text(this.pointer))}snap(e,n,_){let a=j(_,r.SELECT_MODE);return Me(t._wasm_snap_selection(this.pointer,de(e),Be(n),a))}copy(e,n){return be(t._wasm_copy_selection(this.pointer,de(e),Be(n)))}highlight(e,n,_=100){let a=0,p=[];try{a=J(32*_);let f=t._wasm_highlight_selection(this.pointer,de(e),Be(n),a,_);for(let h=0;h<f;++h)p.push(Me(a+h*32))}finally{ye(a)}return p}search(e,n=500){return m_(t._wasm_search_stext_page,this.pointer,e,n)}};me._drop=t._wasm_drop_stext_page;me.SELECT_MODE=["chars","words","lines"];me.SELECT_CHARS="chars";me.SELECT_WORDS="words";me.SELECT_LINES="lines";var W=class r extends I{constructor(e){if(typeof e=="number")super(e);else{let n=at++;v.set(n,e),super(t._wasm_new_js_device(n))}}fillPath(e,n,_,a,p,f){d(e,ae),E(_),d(a,x),ve(p),t._wasm_fill_path(this.pointer,e.pointer,n,T(_),a.pointer,ee(p),f)}strokePath(e,n,_,a,p,f){d(e,ae),d(n,$),E(_),d(a,x),ve(p),t._wasm_stroke_path(this.pointer,e.pointer,n.pointer,T(_),a.pointer,ee(p),f)}clipPath(e,n,_){d(e,ae),E(_),t._wasm_clip_path(this.pointer,e.pointer,n,T(_))}clipStrokePath(e,n,_){d(e,ae),d(n,$),E(_),t._wasm_clip_stroke_path(this.pointer,e.pointer,n.pointer,T(_))}fillText(e,n,_,a,p){d(e,K),E(n),d(_,x),ve(a),t._wasm_fill_text(this.pointer,e.pointer,T(n),_.pointer,ee(a),p)}strokeText(e,n,_,a,p,f){d(e,K),d(n,$),E(_),d(a,x),ve(p),t._wasm_stroke_text(this.pointer,e.pointer,n.pointer,T(_),a.pointer,ee(p),f)}clipText(e,n){d(e,K),E(n),t._wasm_clip_text(this.pointer,e.pointer,T(n))}clipStrokeText(e,n,_){d(e,K),d(n,$),E(_),t._wasm_clip_stroke_text(this.pointer,e.pointer,n.pointer,T(_))}ignoreText(e,n){d(e,K),E(n),t._wasm_ignore_text(this.pointer,e.pointer,T(n))}fillShade(e,n,_){d(e,Ue),E(n),t._wasm_fill_shade(this.pointer,e.pointer,T(n),_)}fillImage(e,n,_){d(e,ne),E(n),t._wasm_fill_image(this.pointer,e.pointer,T(n),_)}fillImageMask(e,n,_,a,p){d(e,ne),E(n),d(_,x),ve(a),t._wasm_fill_image_mask(this.pointer,e.pointer,T(n),_.pointer,ee(a),p)}clipImageMask(e,n){d(e,ne),E(n),t._wasm_clip_image_mask(this.pointer,e.pointer,T(n))}popClip(){t._wasm_pop_clip(this.pointer)}beginMask(e,n,_,a){R(e),d(_,x),ve(a),t._wasm_begin_mask(this.pointer,z(e),n,_.pointer,ee(a))}endMask(){t._wasm_end_mask(this.pointer)}beginGroup(e,n,_,a,p,f){R(e),d(n,x);let h=j(p,r.BLEND_MODES);t._wasm_begin_group(this.pointer,z(e),n.pointer,_,a,h,f)}endGroup(){t._wasm_end_group(this.pointer)}beginTile(e,n,_,a,p,f){return R(e),R(n),E(p),t._wasm_begin_tile(this.pointer,z(e),tt(n),_,a,T(p),f)}endTile(){t._wasm_end_tile(this.pointer)}beginLayer(e){t._wasm_begin_layer(this.pointer,b(e))}endLayer(){t._wasm_end_layer(this.pointer)}close(){t._wasm_close_device(this.pointer)}};W._drop=t._wasm_drop_device;W.BLEND_MODES=["Normal","Multiply","Screen","Overlay","Darken","Lighten","ColorDodge","ColorBurn","HardLight","SoftLight","Difference","Exclusion","Hue","Saturation","Color","Luminosity"];var Xe=class extends W{constructor(e,n){E(e),d(n,re),super(t._wasm_new_draw_device(T(e),n.pointer))}};var d_=class extends I{constructor(e,n,_){super(t._wasm_new_document_writer_with_buffer(_e(e),b(n),e_(_)))}beginPage(e){return R(e),new W(t._wasm_keep_device(t._wasm_begin_page(this.pointer,z(e))))}endPage(){t._wasm_end_page(this.pointer)}close(){t._wasm_close_document_writer(this.pointer)}};d_._drop=t._wasm_drop_document_writer;var D=class r extends I{static openDocument(e,n){let _=0,a=!1;if(typeof e=="string")if(n=e,se)e=se.readFileSync(e);else throw new Error("missing 'fs' module");else typeof n>"u"&&(n="application/pdf");if(d(n,"string"),(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=new te(e),a=!0),e instanceof te)_=t._wasm_open_document_with_buffer(b(n),e.pointer);else if(e instanceof Se)_=t._wasm_open_document_with_stream(b(n),e.pointer);else throw new Error("not a Buffer or Stream");a&&e.destroy();let p=t._wasm_pdf_document_from_fz_document(_);return p?new X(p):new r(_)}formatLinkURI(e){return be(t._wasm_format_link_uri(this.pointer,e.chapter|0,e.page|0,j(e.type,r.LINK_DEST),+e.x,+e.y,+e.width,+e.height,+e.zoom))}asPDF(){return this instanceof X?this:null}isPDF(){return this instanceof X}needsPassword(){return!!t._wasm_needs_password(this.pointer)}authenticatePassword(e){return t._wasm_authenticate_password(this.pointer,b(e))}hasPermission(e){let n=r.PERMISSION[e];return!!t._wasm_has_permission(this.pointer,n)}getMetaData(e){let n=t._wasm_lookup_metadata(this.pointer,b(e));if(n)return k(n)}setMetaData(e,n){t._wasm_set_metadata(this.pointer,b(e),e_(n))}countPages(){return t._wasm_count_pages(this.pointer)}isReflowable(){t._wasm_is_document_reflowable(this.pointer)}layout(e,n,_){t._wasm_layout_document(this.pointer,e,n,_)}loadPage(e){let n=t._wasm_load_page(this.pointer,e);if(this instanceof X){let _=t._wasm_pdf_page_from_fz_page(n);if(_)return new q(this,_)}return new ue(n)}loadOutline(){let e=this.pointer;function n(a){let p=[];for(;a;){let f=t._wasm_outline_get_title(a),h=t._wasm_outline_get_uri(a),g=t._wasm_outline_get_is_open(a),c={title:f?k(f):void 0,uri:h?k(h):void 0,open:!!g},P=t._wasm_outline_get_page(e,a);P>=0&&(c.page=P);let G=t._wasm_outline_get_down(a);G&&(c.down=n(G)),p.push(c),a=t._wasm_outline_get_next(a)}return p}let _=t._wasm_load_outline(e);return _?n(_):null}resolveLink(e){return e instanceof we?t._wasm_resolve_link(this.pointer,t._wasm_link_get_uri(e.pointer)):t._wasm_resolve_link(this.pointer,b(e))}resolveLinkDestination(e){let n;return e instanceof we?n=t._wasm_resolve_link_dest(this.pointer,t._wasm_link_get_uri(e.pointer)):n=t._wasm_resolve_link_dest(this.pointer,b(e)),{type:r.LINK_DEST[t._wasm_link_dest_get_type(n)],chapter:t._wasm_link_dest_get_chapter(n),page:t._wasm_link_dest_get_page(n),x:t._wasm_link_dest_get_x(n),y:t._wasm_link_dest_get_y(n),width:t._wasm_link_dest_get_w(n),height:t._wasm_link_dest_get_h(n),zoom:t._wasm_link_dest_get_zoom(n)}}outlineIterator(){return new xe(t._wasm_new_outline_iterator(this.pointer))}};D._drop=t._wasm_drop_document;D.META_FORMAT="format";D.META_ENCRYPTION="encryption";D.META_INFO_AUTHOR="info:Author";D.META_INFO_TITLE="info:Title";D.META_INFO_SUBJECT="info:Subject";D.META_INFO_KEYWORDS="info:Keywords";D.META_INFO_CREATOR="info:Creator";D.META_INFO_PRODUCER="info:Producer";D.META_INFO_CREATIONDATE="info:CreationDate";D.META_INFO_MODIFICATIONDATE="info:ModDate";D.PERMISSION={print:112,copy:99,edit:101,annotate:110,form:102,accessibility:121,assemble:97,"print-hq":104};D.LINK_DEST=["Fit","FitB","FitH","FitBH","FitV","FitBV","FitR","XYZ"];var xe=class extends I{item(){let e=t._wasm_outline_iterator_item(this.pointer);if(e){let n=t._wasm_outline_item_get_title(e),_=t._wasm_outline_item_get_uri(e),a=t._wasm_outline_item_get_is_open(e);return{title:n?k(n):void 0,uri:_?k(_):void 0,open:!!a}}return null}next(){return t._wasm_outline_iterator_next(this.pointer)}prev(){return t._wasm_outline_iterator_prev(this.pointer)}up(){return t._wasm_outline_iterator_up(this.pointer)}down(){return t._wasm_outline_iterator_down(this.pointer)}delete(){return t._wasm_outline_iterator_delete(this.pointer)}insert(e){return t._wasm_outline_iterator_insert(this.pointer,He(e.title),We(e.uri),e.open)}update(e){t._wasm_outline_iterator_update(this.pointer,He(e.title),We(e.uri),e.open)}};xe._drop=t._wasm_drop_outline_iterator;xe.RESULT_DID_NOT_MOVE=-1;xe.RESULT_AT_ITEM=0;xe.RESULT_AT_EMPTY=1;var we=class extends I{getBounds(){return U(t._wasm_link_get_rect(this.pointer))}setBounds(e){R(e),t._wasm_link_set_rect(this.pointer,z(e))}getURI(){return k(t._wasm_link_get_uri(this.pointer))}setURI(e){d(e,"string"),t._wasm_link_set_uri(this.pointer,b(e))}isExternal(){return/^\w[\w+-.]*:/.test(this.getURI())}};we._drop=t._wasm_drop_link;var ue=class r extends I{isPDF(){return this instanceof q}getBounds(e="CropBox"){let n=j(e,r.BOXES);return U(t._wasm_bound_page(this.pointer,n))}getLabel(){return k(t._wasm_page_label(this.pointer))}run(e,n){d(e,W),E(n),t._wasm_run_page(this.pointer,e.pointer,T(n))}runPageContents(e,n){d(e,W),E(n),t._wasm_run_page_contents(this.pointer,e.pointer,T(n))}runPageAnnots(e,n){d(e,W),E(n),t._wasm_run_page_annots(this.pointer,e.pointer,T(n))}runPageWidgets(e,n){d(e,W),E(n),t._wasm_run_page_widgets(this.pointer,e.pointer,T(n))}toPixmap(e,n,_=!1,a=!0){d(n,x),E(e);let p;return a?p=t._wasm_new_pixmap_from_page(this.pointer,T(e),n.pointer,_):p=t._wasm_new_pixmap_from_page_contents(this.pointer,T(e),n.pointer,_),new re(p)}toDisplayList(e=!0){let n;return e?n=t._wasm_new_display_list_from_page(this.pointer):n=t._wasm_new_display_list_from_page_contents(this.pointer),new De(n)}toStructuredText(e=""){return d(e,"string"),new me(t._wasm_new_stext_page_from_page(this.pointer,b(e)))}getLinks(){let e=[],n=t._wasm_load_links(this.pointer);for(;n;)e.push(new we(t._wasm_keep_link(n))),n=t._wasm_link_get_next(n);return e}createLink(e,n){return R(e),new we(t._wasm_create_link(this.pointer,z(e),b(n)))}deleteLink(e){d(e,we),t._wasm_delete_link(this.pointer,e.pointer)}search(e,n=500){return m_(t._wasm_search_page,this.pointer,e,n)}};ue._drop=t._wasm_drop_page;ue.BOXES=["MediaBox","CropBox","BleedBox","TrimBox","ArtBox"];var X=class r extends D{constructor(e){if(typeof e>"u")super(t._wasm_pdf_create_document());else if(typeof e=="number")super(e);else if(e instanceof r)super(e.pointer),t._wasm_keep_document(this.pointer);else{let n=D.openDocument(e,"application/pdf");if(n instanceof r)return n;throw new Error("not a PDF document")}}loadPage(e){return super.loadPage(e)}_fromPDFObjectNew(e){return e===0?C.Null:new C(this,e)}_fromPDFObjectKeep(e){return e===0?C.Null:new C(this,t._wasm_pdf_keep_obj(e))}_toPDFObject(e){if(e instanceof C)return e;if(e==null)return this.newNull();if(typeof e=="string")return e.startsWith("(")&&e.endsWith(")")?this.newString(e.slice(1,-1)):this.newName(e);if(typeof e=="number")return e===(e|0)?this.newInteger(e):this.newReal(e);if(typeof e=="boolean")return this.newBoolean(e);if(e instanceof Array){let n=this.newArray();for(let _ of e)n.push(_);return n}if(e instanceof Object){let n=this.newDictionary();for(let _ in e)n.put(_,e[_]);return n}throw new TypeError("cannot convert value to PDFObject")}_PDFOBJ(e){return this._toPDFObject(e).pointer}getVersion(){return t._wasm_pdf_version(this.pointer)}getLanguage(){return C_(t._wasm_pdf_document_language(this.pointer))}setLanguage(e){t._wasm_pdf_set_document_language(this.pointer,b(e))}countObjects(){return t._wasm_pdf_xref_len(this.pointer)}getTrailer(){return new C(this,t._wasm_pdf_trailer(this.pointer))}createObject(){let e=t._wasm_pdf_create_object(this.pointer);return this._fromPDFObjectNew(t._wasm_pdf_new_indirect(this.pointer,e))}newNull(){return C.Null}newBoolean(e){return this._fromPDFObjectNew(t._wasm_pdf_new_bool(e))}newInteger(e){return this._fromPDFObjectNew(t._wasm_pdf_new_int(e))}newReal(e){return this._fromPDFObjectNew(t._wasm_pdf_new_real(e))}newName(e){return this._fromPDFObjectNew(t._wasm_pdf_new_name(b(e)))}newString(e){return this._fromPDFObjectNew(t._wasm_pdf_new_text_string(b(e)))}newByteString(e){e instanceof Array&&(e=Uint8Array.from(e)),d(e,Uint8Array);let n=e.byteLength,_=J(n);t.HEAPU8.set(e,_);try{return this._fromPDFObjectNew(t._wasm_pdf_new_string(_,n))}finally{ye(_)}}newIndirect(e){return this._fromPDFObjectNew(t._wasm_pdf_new_indirect(this.pointer,e))}newArray(){return this._fromPDFObjectNew(t._wasm_pdf_new_array(this.pointer))}newDictionary(){return this._fromPDFObjectNew(t._wasm_pdf_new_dict(this.pointer))}deleteObject(e){e instanceof C?e=e.asIndirect():d(e,"number"),t._wasm_pdf_delete_object(this.pointer,e)}addObject(e){return this._fromPDFObjectNew(t._wasm_pdf_add_object(this.pointer,this._PDFOBJ(e)))}addStream(e,n){return this._fromPDFObjectNew(t._wasm_pdf_add_stream(this.pointer,_e(e),this._PDFOBJ(n),0))}addRawStream(e,n){return this._fromPDFObjectNew(t._wasm_pdf_add_stream(this.pointer,_e(e),this._PDFOBJ(n),1))}newGraftMap(){return new qe(this,t._wasm_pdf_new_graft_map(this.pointer))}graftObject(e){return d(e,C),this._fromPDFObjectNew(t._wasm_pdf_graft_object(this.pointer,e.pointer))}graftPage(e,n,_){d(e,"number"),d(n,r),d(_,"number"),t._wasm_pdf_graft_page(this.pointer,e,n.pointer,_)}addSimpleFont(e,n="Latin"){d(e,O);var _=j(n,O.SIMPLE_ENCODING);return this._fromPDFObjectNew(t._wasm_pdf_add_simple_font(this.pointer,e.pointer,_))}addCJKFont(e,n,_=0,a=!0){return d(e,O),typeof n=="string"&&(n=O.CJK_ORDERING_BY_LANG[n]),this._fromPDFObjectNew(t._wasm_pdf_add_cjk_font(this.pointer,e.pointer,n,_,a))}addFont(e){return d(e,O),this._fromPDFObjectNew(t._wasm_pdf_add_cid_font(this.pointer,e.pointer))}addImage(e){return d(e,ne),this._fromPDFObjectNew(t._wasm_pdf_add_image(this.pointer,e.pointer))}loadImage(e){return d(e,C),new ne(t._wasm_pdf_load_image(this.pointer,e.pointer))}findPage(e){return d(e,"number"),this._fromPDFObjectKeep(t._wasm_pdf_lookup_page_obj(this.pointer,e))}addPage(e,n,_,a){return R(e),d(n,"number"),this._fromPDFObjectNew(t._wasm_pdf_add_page(this.pointer,z(e),n,this._PDFOBJ(_),_e(a)))}insertPage(e,n){d(e,"number"),t._wasm_pdf_insert_page(this.pointer,e,this._PDFOBJ(n))}deletePage(e){d(e,"number"),t._wasm_pdf_delete_page(this.pointer,e)}isEmbeddedFile(e){return d(e,C),!!t._wasm_pdf_is_embedded_file(e.pointer)}addEmbeddedFile(e,n,_,a,p,f=!1){return d(e,"string"),d(n,"string"),d(a,Date),d(p,Date),d(f,"boolean"),this._fromPDFObjectNew(t._wasm_pdf_add_embedded_file(this.pointer,b(e),e_(n),_e(_),a.getTime()/1e3|0,p.getTime()/1e3|0,f))}getFilespecParams(e){d(e,C);let n=t._wasm_pdf_get_filespec_params(e.pointer);return{filename:k(t._wasm_pdf_filespec_params_get_filename(n)),mimetype:k(t._wasm_pdf_filespec_params_get_mimetype(n)),size:t._wasm_pdf_filespec_params_get_filename(n),creationDate:new Date(t._wasm_pdf_filespec_params_get_created(n)*1e3),modificationDate:new Date(t._wasm_pdf_filespec_params_get_modified(n)*1e3)}}getEmbeddedFileContents(e){d(e,C);let n=t._wasm_pdf_load_embedded_file_contents(e.pointer);return n?new te(n):null}getEmbeddedFiles(){function e(n,_){var a,p;if(_.isDictionary()){var f=_.get("Names");if(f)for(a=0,p=f.length;a<p;a+=2)n[f.get(a+0).asString()]=f.get(a+1);var h=_.get("Kids");if(h)for(a=0,p=h.length;a<p;a+=1)e(n,h.get(a))}return n}return e({},this.getTrailer().get("Root","Names","EmbeddedFiles"))}loadNameTree(e){function n(p,f){var h=f.get("Kids");if(h&&h.isArray())for(var g=0;g<h.length;g+=1)n(p,h.get(g));var c=f.get("Names");if(c&&c.isArray())for(var g=0;g<c.length;g+=2)p[c.get(g).asString()]=c.get(g+1)}var _=this.getTrailer().get("Root").get("Names").get(e),a={};return _.isDictionary()&&n(a,_),a}insertEmbeddedFile(e,n){var _=this.getEmbeddedFiles();_[e]=n,this._rewriteEmbeddedFiles(_)}deleteEmbeddedFile(e){var n=this.getEmbeddedFiles();delete n[e],this._rewriteEmbeddedFiles(n)}_rewriteEmbeddedFiles(e){var n=Object.keys(e);n.sort();var _=this.getTrailer().get("Root"),a=_.get("Names");a.isDictionary()||(a=_.put("Names",this.newDictionary()));var p=a.put("EmbeddedFiles",this.newDictionary()),f=p.put("Names",this.newArray());for(var h of n)f.push(this.newString(h)),f.push(e[h])}saveToBuffer(e=""){var n;return typeof e=="object"?n=Object.entries(e).map(_=>{var a=_[0],p=_[1];return p===!0?a+"=yes":p===!1?a+"=no":a+"="+String(p).replaceAll(",",":")}).join(","):n=e,new te(t._wasm_pdf_write_document_buffer(this.pointer,b(n)))}save(e,n=""){if(se)se.writeFileSync(e,this.saveToBuffer(n).asUint8Array());else throw new Error("missing 'fs' module")}setPageLabels(e,n="D",_="",a=1){t._wasm_pdf_set_page_labels(this.pointer,e,n.charCodeAt(0),b(_),a)}deletePageLabels(e){t._wasm_pdf_delete_page_labels(this.pointer,e)}wasRepaired(){return!!t._wasm_pdf_was_repaired(this.pointer)}hasUnsavedChanges(){return!!t._wasm_pdf_has_unsaved_changes(this.pointer)}countVersions(){return t._wasm_pdf_count_versions(this.pointer)}countUnsavedVersions(){return t._wasm_pdf_count_unsaved_versions(this.pointer)}validateChangeHistory(){return t._wasm_pdf_validate_change_history(this.pointer)}canBeSavedIncrementally(){return!!t._wasm_pdf_can_be_saved_incrementally(this.pointer)}enableJournal(){t._wasm_pdf_enable_journal(this.pointer)}getJournal(){let e=t._wasm_pdf_undoredo_state_position(this.pointer),n=t._wasm_pdf_undoredo_state_count(this.pointer),_=[];for(let a=0;a<n;++a)_.push(k(t._wasm_pdf_undoredo_step(this.pointer,a)));return{position:e,steps:_}}beginOperation(e){t._wasm_pdf_begin_operation(this.pointer,b(e))}beginImplicitOperation(){t._wasm_pdf_begin_implicit_operation(this.pointer)}endOperation(){t._wasm_pdf_end_operation(this.pointer)}abandonOperation(){t._wasm_pdf_abandon_operation(this.pointer)}canUndo(){return!!t._wasm_pdf_can_undo(this.pointer)}canRedo(){return!!t._wasm_pdf_can_redo(this.pointer)}undo(){t._wasm_pdf_undo(this.pointer)}redo(){t._wasm_pdf_redo(this.pointer)}isJSSupported(){return!!t._wasm_pdf_js_supported(this.pointer)}enableJS(){t._wasm_pdf_enable_js(this.pointer)}disableJS(){t._wasm_pdf_disable_js(this.pointer)}setJSEventListener(e){throw"TODO"}rearrangePages(e){let n=e.length,_=J(n<<2);for(let a=0;a<n;++a)t.HEAPU32[(_>>2)+a]=e[a]||0;try{t._wasm_pdf_rearrange_pages(this.pointer,n,_)}finally{ye(_)}}subsetFonts(){t._wasm_pdf_subset_fonts(this.pointer)}bake(e=!0,n=!0){t._wasm_pdf_bake_document(this.pointer,e,n)}countLayers(){return t._wasm_pdf_count_layers(this.pointer)}isLayerVisible(e){return!!t._wasm_pdf_layer_is_enabled(this.pointer,e)}setLayerVisible(e,n){t._wasm_pdf_enable_layer(this.pointer,e,Number(n))}getLayerName(e){return k(t._wasm_pdf_layer_name(this.pointer,e))}resetForm(e,n){t._wasm_pdf_reset_form(this.pointer,this._PDFOBJ(e),Number(n))}};X.PAGE_LABEL_NONE="\0";X.PAGE_LABEL_DECIMAL="D";X.PAGE_LABEL_ROMAN_UC="R";X.PAGE_LABEL_ROMAN_LC="r";X.PAGE_LABEL_ALPHA_UC="A";X.PAGE_LABEL_ALPHA_LC="a";var q=class extends ue{constructor(e,n){super(n),this._doc=e,this._annots=null,this._widgets=null}getObject(){return this._doc._fromPDFObjectKeep(t._wasm_pdf_page_get_obj(this.pointer))}getTransform(){return L(t._wasm_pdf_page_transform(this.pointer))}setPageBox(e,n){let _=j(e,ue.BOXES);R(n),t._wasm_pdf_set_page_box(this.pointer,_,z(n))}toPixmap(e,n,_=!1,a=!0,p="View",f="CropBox"){E(e),d(n,x);let h=j(f,ue.BOXES),g;return a?g=t._wasm_pdf_new_pixmap_from_page_with_usage(this.pointer,T(e),n.pointer,_,b(p),h):g=t._wasm_pdf_new_pixmap_from_page_contents_with_usage(this.pointer,T(e),n.pointer,_,b(p),h),new re(g)}getWidgets(){if(!this._widgets){this._widgets=[];let e=t._wasm_pdf_first_widget(this.pointer);for(;e;)this._widgets.push(new M(this._doc,t._wasm_pdf_keep_annot(e))),e=t._wasm_pdf_next_widget(e)}return this._widgets}getAnnotations(){if(!this._annots){this._annots=[];let e=t._wasm_pdf_first_annot(this.pointer);for(;e;)this._annots.push(new F(this._doc,t._wasm_pdf_keep_annot(e))),e=t._wasm_pdf_next_annot(e)}return this._annots}createAnnotation(e){let n=j(e,F.ANNOT_TYPES),_=new F(this._doc,t._wasm_pdf_create_annot(this.pointer,n));return this._annots&&this._annots.push(_),_}deleteAnnotation(e){if(d(e,F),t._wasm_pdf_delete_annot(this.pointer,e.pointer),this._annots){let n=this._annots.indexOf(e);n>=0&&this._annots.splice(n,1)}}applyRedactions(e=!0,n=2,_=1,a=0){t._wasm_pdf_redact_page(this.pointer,Number(e),n,_,a)}update(){return!!t._wasm_pdf_update_page(this.pointer)}};q.REDACT_IMAGE_NONE=0;q.REDACT_IMAGE_REMOVE=1;q.REDACT_IMAGE_PIXELS=2;q.REDACT_IMAGE_UNLESS_INVISIBLE=3;q.REDACT_LINE_ART_NONE=0;q.REDACT_LINE_ART_REMOVE_IF_COVERED=1;q.REDACT_LINE_ART_REMOVE_IF_TOUCHED=2;q.REDACT_TEXT_REMOVE=0;q.REDACT_TEXT_NONE=1;var C=class r extends I{constructor(e,n){super(t._wasm_pdf_keep_obj(n)),this._doc=e}isNull(){return this===r.Null}isIndirect(){return!!t._wasm_pdf_is_indirect(this.pointer)}isBoolean(){return!!t._wasm_pdf_is_bool(this.pointer)}isInteger(){return!!t._wasm_pdf_is_int(this.pointer)}isReal(){return!!t._wasm_pdf_is_real(this.pointer)}isNumber(){return!!t._wasm_pdf_is_number(this.pointer)}isName(){return!!t._wasm_pdf_is_name(this.pointer)}isString(){return!!t._wasm_pdf_is_string(this.pointer)}isArray(){return!!t._wasm_pdf_is_array(this.pointer)}isDictionary(){return!!t._wasm_pdf_is_dict(this.pointer)}isStream(){return!!t._wasm_pdf_is_stream(this.pointer)}asIndirect(){return t._wasm_pdf_to_num(this.pointer)}asBoolean(){return!!t._wasm_pdf_to_bool(this.pointer)}asNumber(){return t._wasm_pdf_to_real(this.pointer)}asName(){return k(t._wasm_pdf_to_name(this.pointer))}asString(){return k(t._wasm_pdf_to_text_string(this.pointer))}asByteString(){let e=t._wasm_pdf_to_string(this.pointer,S_),n=t.HEAPU32[S_>>2];return t.HEAPU8.slice(e,e+n)}readStream(){return new te(t._wasm_pdf_load_stream(this.pointer))}readRawStream(){return new te(t._wasm_pdf_load_raw_stream(this.pointer))}writeObject(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeObject on an indirect reference");t._wasm_pdf_update_object(this._doc.pointer,this.asIndirect(),this._doc._PDFOBJ(e))}writeStream(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeStream on an indirect reference");t._wasm_pdf_update_stream(this._doc.pointer,this.pointer,_e(e),0)}writeRawStream(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeRawStream on an indirect reference");t._wasm_pdf_update_stream(this._doc.pointer,this.pointer,_e(e),1)}resolve(){return this._doc._fromPDFObjectKeep(t._wasm_pdf_resolve_indirect(this.pointer))}get length(){return t._wasm_pdf_array_len(this.pointer)}set length(e){throw new TypeError("object length is read-only")}_get(e){let n=this.pointer;for(let _ of e)if(typeof _=="number"?n=t._wasm_pdf_array_get(n,_):_ instanceof r?n=t._wasm_pdf_dict_get(n,_.pointer):n=t._wasm_pdf_dict_gets(n,b(_)),n===0)break;return n}get(...e){return this._doc._fromPDFObjectKeep(this._get(e))}getInheritable(e){return e instanceof r?this._doc._fromPDFObjectKeep(t._wasm_pdf_dict_get_inheritable(this.pointer,e.pointer)):this._doc._fromPDFObjectKeep(t._wasm_pdf_dict_gets_inheritable(this.pointer,b(e)))}put(e,n){return n=this._doc._toPDFObject(n),typeof e=="number"?t._wasm_pdf_array_put(this.pointer,e,n.pointer):e instanceof r?t._wasm_pdf_dict_put(this.pointer,e.pointer,n.pointer):t._wasm_pdf_dict_puts(this.pointer,b(e),n.pointer),n}push(e){return e=this._doc._toPDFObject(e),t._wasm_pdf_array_push(this.pointer,e.pointer),e}delete(e){typeof e=="number"?t._wasm_pdf_array_delete(this.pointer,e):e instanceof r?t._wasm_pdf_dict_del(this.pointer,e.pointer):t._wasm_pdf_dict_dels(this.pointer,b(e))}valueOf(){return this.isNull()?null:this.isBoolean()?this.asBoolean():this.isNumber()?this.asNumber():this.isName()?this.asName():this.isString()?this.asString():this.isIndirect()?`${this.asIndirect()} 0 R`:this}toString(e=!0,n=!0){return be(t._wasm_pdf_sprint_obj(this.pointer,e,n))}forEach(e){if(this.isArray()){let n=this.length;for(let _=0;_<n;++_)e(this.get(_),_,this)}else if(this.isDictionary()){let n=t._wasm_pdf_dict_len(this.pointer);for(let _=0;_<n;++_){let a=this._doc._fromPDFObjectKeep(t._wasm_pdf_dict_get_key(this.pointer,_)),p=this._doc._fromPDFObjectKeep(t._wasm_pdf_dict_get_val(this.pointer,_));e(p,a.asName(),this)}}}asJS(e){if(this.isIndirect()){let n=this.asIndirect();return e?n in e?e[n]:(e[n]=r.Null,e[n]=this.resolve().asJS(e)):`${n} 0 R`}if(this.isArray()){let n=[];return this.forEach(_=>{n.push(_.asJS(e))}),n}if(this.isDictionary()){let n={};return this.forEach((_,a)=>{n[a]=_.asJS(e)}),n}return this.valueOf()}};C._drop=t._wasm_pdf_drop_obj;C.Null=new C(null,0);var qe=class extends I{constructor(e,n){super(n),this._doc=e}graftObject(e){return d(e,C),this._doc._fromPDFObjectNew(t._wasm_pdf_graft_mapped_object(this.pointer,e.pointer))}graftPage(e,n,_){d(e,"number"),d(n,X),d(_,"number"),t._wasm_pdf_graft_mapped_page(this.pointer,e,n.pointer,_)}};qe._drop=t._wasm_pdf_drop_graft_map;var F=class r extends I{constructor(e,n){super(n),this._doc=e}getObject(){return this._doc._fromPDFObjectKeep(t._wasm_pdf_annot_obj(this.pointer))}getBounds(){return U(t._wasm_pdf_bound_annot(this.pointer))}run(e,n){d(e,W),E(n),t._wasm_pdf_run_annot(this.pointer,e.pointer,T(n))}toPixmap(e,n,_=!1){return E(e),d(n,x),new re(t._wasm_pdf_new_pixmap_from_annot(this.pointer,T(e),n.pointer,_))}toDisplayList(){return new De(t._wasm_pdf_new_display_list_from_annot(this.pointer))}update(){return!!t._wasm_pdf_update_annot(this.pointer)}getType(){let e=t._wasm_pdf_annot_type(this.pointer);return r.ANNOT_TYPES[e]||"Text"}getLanguage(){return C_(t._wasm_pdf_annot_language(this.pointer))}setLanguage(e){t._wasm_pdf_set_annot_language(this.pointer,b(e))}getFlags(){return t._wasm_pdf_annot_flags(this.pointer)}setFlags(e){return t._wasm_pdf_set_annot_flags(this.pointer,e)}getContents(){return k(t._wasm_pdf_annot_contents(this.pointer))}setContents(e){t._wasm_pdf_set_annot_contents(this.pointer,b(e))}getAuthor(){return k(t._wasm_pdf_annot_author(this.pointer))}setAuthor(e){t._wasm_pdf_set_annot_author(this.pointer,b(e))}getCreationDate(){return new Date(t._wasm_pdf_annot_creation_date(this.pointer)*1e3)}setCreationDate(e){d(e,Date),t._wasm_pdf_set_annot_creation_date(this.pointer,e.getTime()/1e3)}getModificationDate(){return new Date(t._wasm_pdf_annot_modification_date(this.pointer)*1e3)}setModificationDate(e){d(e,Date),t._wasm_pdf_set_annot_modification_date(this.pointer,e.getTime()/1e3)}hasRect(){return!!t._wasm_pdf_annot_has_rect(this.pointer)}hasInkList(){return!!t._wasm_pdf_annot_has_ink_list(this.pointer)}hasQuadPoints(){return!!t._wasm_pdf_annot_has_quad_points(this.pointer)}hasVertices(){return!!t._wasm_pdf_annot_has_vertices(this.pointer)}hasLine(){return!!t._wasm_pdf_annot_has_line(this.pointer)}hasInteriorColor(){return!!t._wasm_pdf_annot_has_interior_color(this.pointer)}hasLineEndingStyles(){return!!t._wasm_pdf_annot_has_line_ending_styles(this.pointer)}hasBorder(){return!!t._wasm_pdf_annot_has_border(this.pointer)}hasBorderEffect(){return!!t._wasm_pdf_annot_has_border_effect(this.pointer)}hasIcon(){return!!t._wasm_pdf_annot_has_icon_name(this.pointer)}hasOpen(){return!!t._wasm_pdf_annot_has_open(this.pointer)}hasAuthor(){return!!t._wasm_pdf_annot_has_author(this.pointer)}hasFilespec(){return!!t._wasm_pdf_annot_has_filespec(this.pointer)}hasCallout(){return!!t._wasm_pdf_annot_has_callout(this.pointer)}hasRichContents(){return!!t._wasm_pdf_annot_has_rich_contents(this.pointer)}getRect(){return U(t._wasm_pdf_annot_rect(this.pointer))}setRect(e){R(e),t._wasm_pdf_set_annot_rect(this.pointer,z(e))}getPopup(){return U(t._wasm_pdf_annot_popup(this.pointer))}setPopup(e){R(e),t._wasm_pdf_set_annot_popup(this.pointer,z(e))}getIsOpen(){return!!t._wasm_pdf_annot_is_open(this.pointer)}setIsOpen(e){d(e,"boolean"),t._wasm_pdf_set_annot_is_open(this.pointer,e)}getHiddenForEditing(){return!!t._wasm_pdf_annot_hidden_for_editing(this.pointer)}setHiddenForEditing(e){d(e,"boolean"),t._wasm_pdf_set_annot_hidden_for_editing(this.pointer,e)}getIcon(){return k(t._wasm_pdf_annot_icon_name(this.pointer))}setIcon(e){d(e,"string"),t._wasm_pdf_set_annot_icon_name(this.pointer,b(e))}getOpacity(){return t._wasm_pdf_annot_opacity(this.pointer)}setOpacity(e){d(e,"number"),t._wasm_pdf_set_annot_opacity(this.pointer,e)}getQuadding(){return t._wasm_pdf_annot_quadding(this.pointer)}setQuadding(e){d(e,"number"),t._wasm_pdf_set_annot_quadding(this.pointer,e)}getLine(){let e=Z(t._wasm_pdf_annot_line_1(this.pointer)),n=Z(t._wasm_pdf_annot_line_2(this.pointer));return[e,n]}setLine(e,n){Ye(e),Ye(n),t._wasm_pdf_set_annot_line(this.pointer,de(e),Be(n))}getLineEndingStyles(){let e=t._wasm_pdf_annot_line_ending_styles_start(this.pointer),n=t._wasm_pdf_annot_line_ending_styles_end(this.pointer);return{start:r.LINE_ENDING[e]||"None",end:r.LINE_ENDING[n]||"None"}}setLineEndingStyles(e,n){let _=j(e,r.LINE_ENDING),a=j(n,r.LINE_ENDING);t._wasm_pdf_set_annot_line_ending_styles(this.pointer,_,a)}getLineCaption(){return t._wasm_pdf_annot_line_caption(this.pointer)}setLineCaption(e){return t._wasm_pdf_set_annot_line_caption(this.pointer,e)}getLineCaptionOffset(){return Z(t._wasm_pdf_annot_line_caption_offset(this.pointer))}setLineCaptionOffset(e){return t._wasm_pdf_set_annot_line_caption_offset(this.pointer,de(e))}getLineLeader(){return t._wasm_pdf_annot_line_leader(this.pointer)}getLineLeaderExtension(){return t._wasm_pdf_annot_line_leader_extension(this.pointer)}getLineLeaderOffset(){return t._wasm_pdf_annot_line_leader_offset(this.pointer)}setLineLeader(e){return t._wasm_pdf_set_annot_line_leader(this.pointer,e)}setLineLeaderExtension(e){return t._wasm_pdf_set_annot_line_leader_extension(this.pointer,e)}setLineLeaderOffset(e){return t._wasm_pdf_set_annot_line_leader_offset(this.pointer,e)}getCalloutStyle(){let e=t._wasm_pdf_annot_callout_style(this.pointer);return r.LINE_ENDING[e]||"None"}setCalloutStyle(e){let n=j(e,r.LINE_ENDING);t._wasm_pdf_set_annot_callout_style(this.pointer,n)}getCalloutLine(){let e=t._wasm_pdf_annot_callout_line(this.pointer,H<<2);return e==3?[Z(H+0<<2),Z(H+1<<2),Z(H+2<<2)]:e==2?[Z(H+0<<2),Z(H+1<<2)]:null}setCalloutLine(e){let n=e[0]||[0,0],_=e[1]||[0,0],a=e[2]||[0,0];t._wasm_pdf_set_annot_callout_line(this.pointer,e.length,de(n),Be(_),_t(a))}getCalloutPoint(){let e=this.getCalloutLine();if(e)return e[0]}setCalloutPoint(e){t._wasm_pdf_set_annot_callout_point(this.pointer,de(e))}getColor(){return p_(t._wasm_pdf_annot_color(this.pointer,ee()))}getInteriorColor(){return p_(t._wasm_pdf_annot_interior_color(this.pointer,ee()))}setColor(e){o_(e),t._wasm_pdf_set_annot_color(this.pointer,e.length,ee(e))}setInteriorColor(e){o_(e),t._wasm_pdf_set_annot_interior_color(this.pointer,e.length,ee(e))}getBorderWidth(){return t._wasm_pdf_annot_border_width(this.pointer)}setBorderWidth(e){return d(e,"number"),t._wasm_pdf_set_annot_border_width(this.pointer,e)}getBorderStyle(){return r.BORDER_STYLE[t._wasm_pdf_annot_border_style(this.pointer)]||"Solid"}setBorderStyle(e){let n=j(e,r.BORDER_STYLE);return t._wasm_pdf_set_annot_border_style(this.pointer,n)}getBorderEffect(){return r.BORDER_EFFECT[t._wasm_pdf_annot_border_effect(this.pointer)]||"None"}setBorderEffect(e){let n=j(e,r.BORDER_EFFECT);return t._wasm_pdf_set_annot_border_effect(this.pointer,n)}getBorderEffectIntensity(){return t._wasm_pdf_annot_border_effect_intensity(this.pointer)}setBorderEffectIntensity(e){return d(e,"number"),t._wasm_pdf_set_annot_border_effect_intensity(this.pointer,e)}getBorderDashCount(){return t._wasm_pdf_annot_border_dash_count(this.pointer)}getBorderDashItem(e){return t._wasm_pdf_annot_border_dash_item(this.pointer,e)}clearBorderDash(){t._wasm_pdf_clear_annot_border_dash(this.pointer)}addBorderDashItem(e){return d(e,"number"),t._wasm_pdf_add_annot_border_dash_item(this.pointer,e)}getBorderDashPattern(){let e=this.getBorderDashCount(),n=new Array(e);for(let _=0;_<e;++_)n[_]=this.getBorderDashItem(_);return n}setBorderDashPattern(e){this.clearBorderDash();for(let n of e)this.addBorderDashItem(n)}getIntent(){return r.INTENT[t._wasm_pdf_annot_intent(this.pointer)]||null}setIntent(e){let n=j(e,r.INTENT);return t._wasm_pdf_set_annot_intent(this.pointer,n)}setDefaultAppearance(e,n,_){d(e,"string"),d(n,"number"),o_(_),t._wasm_pdf_set_annot_default_appearance(this.pointer,b(e),n,_.length,ee(_))}getDefaultAppearance(){let e=k(t._wasm_pdf_annot_default_appearance_font(this.pointer)),n=t._wasm_pdf_annot_default_appearance_size(this.pointer),_=p_(t._wasm_pdf_annot_default_appearance_color(this.pointer,ee()));return{font:e,size:n,color:_}}getFileSpec(){return this._doc._fromPDFObjectKeep(t._wasm_pdf_annot_filespec(this.pointer))}setFileSpec(e){return t._wasm_pdf_set_annot_filespec(this.pointer,this._doc._PDFOBJ(e))}getQuadPoints(){let e=t._wasm_pdf_annot_quad_point_count(this.pointer),n=[];for(let _=0;_<e;++_)n.push(Me(t._wasm_pdf_annot_quad_point(this.pointer,_)));return n}clearQuadPoints(){t._wasm_pdf_clear_annot_quad_points(this.pointer)}addQuadPoint(e){N_(e),t._wasm_pdf_add_annot_quad_point(this.pointer,L_(e))}setQuadPoints(e){this.clearQuadPoints();for(let n of e)this.addQuadPoint(n)}getVertices(){let e=t._wasm_pdf_annot_vertex_count(this.pointer),n=new Array(e);for(let _=0;_<e;++_)n[_]=Z(t._wasm_pdf_annot_vertex(this.pointer,_));return n}clearVertices(){t._wasm_pdf_clear_annot_vertices(this.pointer)}addVertex(e){Ye(e),t._wasm_pdf_add_annot_vertex(this.pointer,de(e))}setVertices(e){this.clearVertices();for(let n of e)this.addVertex(n)}getInkList(){let e=t._wasm_pdf_annot_ink_list_count(this.pointer),n=[];for(let _=0;_<e;++_){let a=t._wasm_pdf_annot_ink_list_stroke_count(this.pointer,_),p=new Array(a);for(let f=0;f<a;++f)p[f]=Z(t._wasm_pdf_annot_ink_list_stroke_vertex(this.pointer,_,f));n.push(p)}return n}clearInkList(){t._wasm_pdf_clear_annot_ink_list(this.pointer)}addInkListStroke(){t._wasm_pdf_add_annot_ink_list_stroke(this.pointer)}addInkListStrokeVertex(e){Ye(e),t._wasm_pdf_add_annot_ink_list_stroke_vertex(this.pointer,de(e))}setInkList(e){this.clearInkList();for(let n of e){this.addInkListStroke();for(let _ of n)this.addInkListStrokeVertex(_)}}getRichContents(){return k(t._wasm_pdf_annot_rich_contents(this.pointer))}setRichContents(e,n){d(e,"string"),d(n,"string"),t._wasm_pdf_set_annot_rich_contents(this.pointer,b(e),e_(n))}getRichDefaults(){return k(t._wasm_pdf_annot_rich_defaults(this.pointer))}setRichDefaults(e){d(e,"string"),t._wasm_pdf_set_annot_rich_defaults(this.pointer,b(e))}setStampImage(e){t._wasm_pdf_set_annot_stamp_image(this.pointer,e.pointer)}setAppearanceFromDisplayList(e,n,_,a){E(_),d(a,De),t._wasm_pdf_set_annot_appearance_from_display_list(this.pointer,He(e),We(n),T(_),a.pointer)}setAppearance(e,n,_,a,p,f){E(_),R(a),t._wasm_pdf_set_annot_appearance(this.pointer,He(e),We(n),T(_),z(a),this._doc._PDFOBJ(p),_e(f))}applyRedaction(e=1,n=2,_=1,a=0){t._wasm_pdf_apply_redaction(this.pointer,e,n,_,a)}};F._drop=t._wasm_pdf_drop_annot;F.ANNOT_TYPES=["Text","Link","FreeText","Line","Square","Circle","Polygon","PolyLine","Highlight","Underline","Squiggly","StrikeOut","Redact","Stamp","Caret","Ink","Popup","FileAttachment","Sound","Movie","RichMedia","Widget","Screen","PrinterMark","TrapNet","Watermark","3D","Projection"];F.LINE_ENDING=["None","Square","Circle","Diamond","OpenArrow","ClosedArrow","Butt","ROpenArrow","RClosedArrow","Slash"];F.BORDER_STYLE=["Solid","Dashed","Beveled","Inset","Underline"];F.BORDER_EFFECT=["None","Cloudy"];F.INTENT=[null,"FreeTextCallout","FreeTextTypeWriter","LineArrow","LineDimension","PloyLine","PolygonCloud","PolygonDimension","StampImage","StampSnapshot"];F.IS_INVISIBLE=1;F.IS_HIDDEN=2;F.IS_PRINT=4;F.IS_NO_ZOOM=8;F.IS_NO_ROTATE=16;F.IS_NO_VIEW=32;F.IS_READ_ONLY=64;F.IS_LOCKED=128;F.IS_TOGGLE_NO_VIEW=256;F.IS_LOCKED_CONTENTS=512;var M=class r extends F{getFieldType(){return r.WIDGET_TYPES[t._wasm_pdf_annot_field_type(this.pointer)]||"button"}isButton(){let e=this.getFieldType();return e==="button"||e==="checkbox"||e==="radiobutton"}isPushButton(){return this.getFieldType()==="button"}isCheckbox(){return this.getFieldType()==="checkbox"}isRadioButton(){return this.getFieldType()==="radiobutton"}isText(){return this.getFieldType()==="text"}isChoice(){let e=this.getFieldType();return e==="combobox"||e==="listbox"}isListBox(){return this.getFieldType()==="listbox"}isComboBox(){return this.getFieldType()==="combobox"}getFieldFlags(){return t._wasm_pdf_annot_field_flags(this.pointer)}isMultiline(){return(this.getFieldFlags()&r.TX_FIELD_IS_MULTILINE)!==0}isPassword(){return(this.getFieldFlags()&r.TX_FIELD_IS_PASSWORD)!==0}isComb(){return(this.getFieldFlags()&r.TX_FIELD_IS_COMB)!==0}isReadOnly(){return(this.getFieldFlags()&r.FIELD_IS_READ_ONLY)!==0}getLabel(){return k(t._wasm_pdf_annot_field_label(this.pointer))}getName(){return be(t._wasm_pdf_load_field_name(this.pointer))}getValue(){return k(t._wasm_pdf_annot_field_value(this.pointer))}setTextValue(e){return t._wasm_pdf_set_annot_text_field_value(this.pointer,b(e))}getMaxLen(){return t._wasm_pdf_annot_text_widget_max_len(this.pointer)}setChoiceValue(e){return t._wasm_pdf_set_annot_choice_field_value(this.pointer,b(e))}getOptions(e=!1){let n=[],_=t._wasm_pdf_annot_choice_field_option_count(this.pointer);for(let a=0;a<_;++a)n.push(k(t._wasm_pdf_annot_choice_field_option(this.pointer,e,a)));return n}toggle(){return t._wasm_pdf_toggle_widget(this.pointer)}};M.WIDGET_TYPES=["widget","button","checkbox","combobox","listbox","radiobutton","signature","text"];M.FIELD_IS_READ_ONLY=1;M.FIELD_IS_REQUIRED=2;M.FIELD_IS_NO_EXPORT=4;M.TX_FIELD_IS_MULTILINE=4096;M.TX_FIELD_IS_PASSWORD=8192;M.TX_FIELD_IS_COMB=1<<24;M.BTN_FIELD_IS_NO_TOGGLE_TO_OFF=16384;M.BTN_FIELD_IS_RADIO=32768;M.BTN_FIELD_IS_PUSHBUTTON=65536;M.CH_FIELD_IS_COMBO=1<<17;M.CH_FIELD_IS_EDIT=1<<18;M.CH_FIELD_IS_SORT=1<<19;M.CH_FIELD_IS_MULTI_SELECT=1<<21;var rt=0,$e=new Map;globalThis.$libmupdf_stm_close=function(r){let e=$e.get(r);if(e){e.close(),$e.delete(r);return}throw new Error("invalid file handle")};globalThis.$libmupdf_stm_seek=function(r,e,n,_){let a=$e.get(r);if(a){if(_===0)return n;if(_===1)return e+n;if(_===2){let p=a.fileSize();return p<0?-1:p+n}throw new Error("invalid whence argument")}throw new Error("invalid file handle")};globalThis.$libmupdf_stm_read=function(r,e,n,_){let a=$e.get(r);if(a)return a.read(t.HEAPU8,n,_,e);throw new Error("invalid file handle")};var Se=class extends I{constructor(e){let n=rt++;$e.set(n,e),super(t._wasm_new_stream(n))}};Se._drop=t._wasm_drop_stream;var O_;globalThis.$libmupdf_load_font_file=function(r,e,n,_){if(O_){var a=O_(k(r),k(e),n,_);if(a)return d(a,O),a.pointer}return 0};var at=0,v=new Map,it=0,Ie=new Map,ot=0,je=new Map;globalThis.$libmupdf_path_walk={moveto(r,e,n){Ie.get(r)?.moveTo?.(e,n)},lineto(r,e,n){Ie.get(r)?.lineTo?.(e,n)},curveto(r,e,n,_,a,p,f){Ie.get(r)?.curveTo?.(e,n,_,a,p,f)},closepath(r){Ie.get(r)?.closePath?.()}};var Fe=null;globalThis.$libmupdf_text_walk={begin_span(r,e,n,_,a,p,f){e!==Fe?.pointer&&(Fe=new O(e)),je.get(r)?.beginSpan?.(Fe,L(n),_,a,p,k(f))},end_span(r){je.get(r)?.endSpan?.()},show_glyph(r,e,n,_,a,p,f){e!==Fe?.pointer&&(Fe=new O(e)),je.get(r)?.showGlyph?.(Fe,L(n),_,a,p,f)}};globalThis.$libmupdf_device={drop_device(r){v.get(r)?.drop?.(),v.delete(r)},close_device(r){v.get(r)?.close?.()},fill_path(r,e,n,_,a,p,f,h){v.get(r)?.fillPath?.(new ae(t._wasm_keep_path(e)),!!n,L(_),new x(t._wasm_keep_colorspace(a)),Pe(p,f),h)},clip_path(r,e,n,_){v.get(r)?.clipPath?.(new ae(t._wasm_keep_path(e)),!!n,L(_))},stroke_path(r,e,n,_,a,p,f,h){v.get(r)?.strokePath?.(new ae(t._wasm_keep_path(e)),new $(t._wasm_keep_stroke_state(n)),L(_),new x(t._wasm_keep_colorspace(a)),Pe(p,f),h)},clip_stroke_path(r,e,n,_){v.get(r)?.clipStrokePath?.(new ae(t._wasm_keep_path(e)),new $(t._wasm_keep_stroke_state(n)),L(_))},fill_text(r,e,n,_,a,p,f){v.get(r)?.fillText?.(new K(t._wasm_keep_text(e)),L(n),new x(t._wasm_keep_colorspace(_)),Pe(a,p),f)},stroke_text(r,e,n,_,a,p,f,h){v.get(r)?.strokeText?.(new K(t._wasm_keep_text(e)),new $(t._wasm_keep_stroke_state(n)),L(_),new x(t._wasm_keep_colorspace(a)),Pe(p,f),h)},clip_text(r,e,n){v.get(r)?.clipText?.(new K(t._wasm_keep_text(e)),L(n))},clip_stroke_text(r,e,n,_){v.get(r)?.clipStrokeText?.(new K(t._wasm_keep_text(e)),new $(t._wasm_keep_stroke_state(n)),L(_))},ignore_text(r,e,n){v.get(r)?.ignoreText?.(new K(t._wasm_keep_text(e)),L(n))},fill_shade(r,e,n,_){v.get(r)?.fillShade?.(new Ue(e),L(n),_)},fill_image(r,e,n,_){v.get(r)?.fillImage?.(new ne(e),L(n),_)},fill_image_mask(r,e,n,_,a,p,f){v.get(r)?.fillImageMask?.(new ne(e),L(n),new x(t._wasm_keep_colorspace(_)),Pe(a,p),f)},clip_image_mask(r,e,n){v.get(r)?.clipImageMask?.(new ne(e),L(n))},pop_clip(r){v.get(r)?.popClip?.()},begin_mask(r,e,n,_,a,p){v.get(r)?.beginMask?.(U(e),!!n,new x(t._wasm_keep_colorspace(_)),Pe(a,p))},begin_group(r,e,n,_,a,p,f){v.get(r)?.beginGroup?.(U(e),new x(t._wasm_keep_colorspace(n)),!!_,!!a,W.BLEND_MODES[p],f)},begin_tile(r,e,n,_,a,p,f){return v.get(r)?.beginTile?.(U(e),U(n),_,a,L(p),f)||0},begin_layer(r,e){v.get(r)?.beginLayer?.(k(e))},end_mask(r){v.get(r)?.endMask?.()},end_group(r){v.get(r)?.endGroup?.()},end_tile(r){v.get(r)?.endTile?.()},end_layer(r){v.get(r)?.endLayer?.()}};var V={};onmessage=async function(r){let[e,n,_]=r.data;try{let a=V[e](..._);postMessage(["RESULT",n,a])}catch(a){postMessage(["ERROR",n,{name:a.name,message:a.message,stack:a.stack}])}};var R_=1,Q={},l_=class{constructor(e){this.reader=new FileReaderSync,this.blob=e}fileSize(){return this.blob.size}read(e,n,_,a){let p=this.reader.readAsArrayBuffer(this.blob.slice(a,a+_));return e.set(new Uint8Array(p),n),p.byteLength}close(){this.reader=null,this.blob=null}};V.openDocumentFromBlob=function(r,e){let n=new Se(new l_(r)),_=R_++;return Q[_]=D.openDocument(n,e),_};V.openDocumentFromBuffer=function(r,e){let n=R_++;return Q[n]=D.openDocument(r,e),n};V.closeDocument=function(r){Q[r].destroy(),delete Q[r]};V.documentTitle=function(r){return Q[r].getMetaData(D.META_INFO_TITLE)};V.documentOutline=function(r){return Q[r].loadOutline()};V.countPages=function(r){return Q[r].countPages()};V.getPageSize=function(r,e){let a=Q[r].loadPage(e).getBounds();return{width:a[2]-a[0],height:a[3]-a[1]}};V.getPageLinks=function(r,e){let n=Q[r];return n.loadPage(e).getLinks().map(p=>{let[f,h,g,c]=p.getBounds(),P;return p.isExternal()?P=p.getURI():P=`#page${n.resolveLink(p)+1}`,{x:f,y:h,w:g-f,h:c-h,href:P}})};V.getPageText=function(r,e){let a=Q[r].loadPage(e).toStructuredText().asJSON();return JSON.parse(a)};V.search=function(r,e,n){let p=Q[r].loadPage(e).search(n),f=[];for(let h of p)for(let g of h){let[c,P,G,Oe,Ee,le,Ne,f_]=g;f.push({x:c,y:P,w:G-c,h:le-P})}return f};V.getPageAnnotations=function(r,e,n){let a=Q[r].loadPage(e);if(a==null)return[];let p=a.getAnnotations(),f=[n=72,0,0,n/72,0,0];return p.map(h=>{let[g,c,P,G]=Qe.transformRect(h.getBounds());return{x:g,y:c,w:P-g,h:G-c,type:h.getType(),ref:h.pointer}})};V.drawPageAsPixmap=function(r,e,n){let _=Qe.scale(n/72,n/72),p=Q[r].loadPage(e),f=fe.transform(p.getBounds(),_),h=new re(x.DeviceRGB,f,!0);h.clear(255);let g=new Xe(_,h);p.run(g,Qe.identity),g.close();let c=new ImageData(h.getPixels().slice(),h.getWidth(),h.getHeight());return h.destroy(),c};postMessage(["INIT",0,Object.keys(V)]);
